import{_ as ne}from"./AppTextField-aZv7gLR1.js";import{_ as _e}from"./DialogCloseBtn-Cqv4-KPS.js";import{V as Q}from"./VCard-CIKASufN.js";import{V as z}from"./VCardText-DDkz13nn.js";import{V as ge}from"./VForm-DNQjOeF6.js";import{V as be}from"./VTable-Bdz8hCOV.js";import{V as N}from"./VCheckbox-DVRJe9wS.js";import{r as c,V as J,w as j,f as S,o as f,e as t,b as e,d as a,t as h,l as n,$ as V,c as R,F as L,h as ee,a5 as K,s as U,a as te,k as Z,Z as P,am as B,an as E,ao as T,cI as I,cF as O,cD as G,cJ as re,cC as Ve,d8 as we,d9 as xe,al as ye}from"./main-BoNGmApi.js";import{V as he}from"./VDialog-fBE2blFA.js";import{a as A,V as ae}from"./VRow-CR53p6r4.js";import{V as ie}from"./VSpacer-EjYJj1Z_.js";import{V as q}from"./VAvatar-B4jUlWaz.js";import{a as Ue}from"./formatters-Cw2xOObF.js";import{_ as ke}from"./TablePagination-DdKTX9OV.js";import{_ as Ce}from"./AppSelect-Dc5xzrsl.js";import{_ as De}from"./AddNewUserDrawer-Q3hwt6jb.js";import{u as $e}from"./useApi-Bz-8d2HT.js";import{c as Pe}from"./createUrl-Be5jbmbl.js";import{$ as oe}from"./api-CHPjDHzy.js";import{V as Re}from"./VDivider-COJgEHam.js";import{V as Ae}from"./VDataTableServer-cQiRBdfY.js";import{V as Me}from"./VMenu-Ct53Bckx.js";import{c as Se,a as H,b as Y}from"./VList-dMazRKTH.js";import{V as Be}from"./VChip-CFWLr0Fc.js";import{V as Ee}from"./VImg-C0UW1cvE.js";import"./form-BOCittNv.js";import"./VTextField-DfsZX4z1.js";/* empty css                   */import"./VCounter-BrDhg_jj.js";import"./VField-CGulMkEM.js";import"./easing-Bybner-F.js";import"./VInput-UNY5FM3D.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-CXq9-h6C.js";import"./VSelectionControl-BjjFP2rz.js";import"./VOverlay-BEh_8h-6.js";import"./delay-VWJ3yp0p.js";import"./lazy-CCMlf-LN.js";import"./scopeId-9mEpF7-z.js";import"./dialog-transition-DSZfBO75.js";/* empty css              */import"./helpers-DK5QwNv0.js";import"./VPagination-g7dDgunw.js";import"./VSelect-DvY4lhKB.js";import"./validators-DpYrMFzk.js";import"./AppDrawerHeaderSection-C2Ci_3BF.js";import"./vue3-perfect-scrollbar-C3VtpWIR.js";import"./VNavigationDrawer-CMqHVrvh.js";import"./ssrBoot-CbhHCPX2.js";import"./index-CvOPxmL5.js";import"./VDataTable-C6qSTHw6.js";import"./filter-JpcQOUJD.js";import"./VSlideGroup-BuutOZ8P.js";const Te={class:"text-h4 text-center mb-2"},Ie={colspan:"3"},Le={class:"d-flex justify-end"},ze={class:"text-h6"},Fe={class:"d-flex justify-end"},Ne={class:"d-flex justify-end"},je={class:"d-flex justify-end"},Oe={class:"d-flex align-center justify-center gap-4"},qe={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(F,{emit:k}){const d=F,g=k,m=c([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),w=c(!1),x=c(""),o=c(),b=J(()=>{let u=0;return m.value.forEach(r=>{Object.entries(r).forEach(([C,D])=>{C!=="name"&&D&&u++})}),u}),y=J(()=>b.value>0&&b.value<m.value.length*3);j(w,u=>{m.value=m.value.map(r=>({...r,read:u,write:u,create:u}))}),j(y,()=>{y.value||(w.value=!1)}),j(m,()=>{b.value===m.value.length*3&&(w.value=!0)},{deep:!0}),j(()=>d,()=>{d.rolePermissions&&d.rolePermissions.permissions.length&&(x.value=d.rolePermissions.name,m.value=m.value.map(u=>{var C;const r=(C=d.rolePermissions)==null?void 0:C.permissions.find(D=>D.name===u.name);return r?{...u,...r}:u}))});const i=()=>{var r;const u={name:x.value,permissions:m.value};g("update:rolePermissions",u),g("update:isDialogVisible",!1),w.value=!1,(r=o.value)==null||r.reset()},v=()=>{var u;g("update:isDialogVisible",!1),w.value=!1,(u=o.value)==null||u.reset()};return(u,r)=>{const C=_e,D=ne;return f(),S(he,{width:u.$vuetify.display.smAndDown?"auto":900,"model-value":d.isDialogVisible,"onUpdate:modelValue":v},{default:t(()=>[e(C,{onClick:v}),e(Q,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(z,null,{default:t(()=>[a("h4",Te,h(d.rolePermissions.name?"Edit":"Add New")+" Role ",1),r[7]||(r[7]=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1)),e(n(ge),{ref_key:"refPermissionForm",ref:o},{default:t(()=>[e(D,{modelValue:n(x),"onUpdate:modelValue":r[0]||(r[0]=p=>V(x)?x.value=p:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[6]||(r[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(be,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[r[3]||(r[3]=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1)),a("td",Ie,[a("div",Le,[e(N,{modelValue:n(w),"onUpdate:modelValue":r[1]||(r[1]=p=>V(w)?w.value=p:null),indeterminate:n(y),"onUpdate:indeterminate":r[2]||(r[2]=p=>V(y)?y.value=p:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(f(!0),R(L,null,ee(n(m),p=>(f(),R("tr",{key:p.name},[a("td",null,[a("h6",ze,h(p.name),1)]),a("td",null,[a("div",Fe,[e(N,{modelValue:p.read,"onUpdate:modelValue":$=>p.read=$,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Ne,[e(N,{modelValue:p.write,"onUpdate:modelValue":$=>p.write=$,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",je,[e(N,{modelValue:p.create,"onUpdate:modelValue":$=>p.create=$,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Oe,[e(K,{onClick:i},{default:t(()=>r[4]||(r[4]=[U(" Submit ")])),_:1,__:[4]}),e(K,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>r[5]||(r[5]=[U(" Cancel ")])),_:1,__:[5]})])]),_:1,__:[6]},512)]),_:1,__:[7]})]),_:1})]),_:1},8,["width","model-value"])}}},Qe="/assets/girl-using-mobile-CKXBkoEQ.png",Je={class:"text-body-1"},Ke={class:"v-avatar-group"},We={class:"d-flex justify-space-between align-center"},Xe={class:"text-h5"},Ze={class:"d-flex align-center"},Ge=["onClick"],He=["src"],Ye={__name:"RoleCards",setup(F){const k=c([{role:"Administrator",users:[B,E,T,I],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,E,T,I,O,G,re],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,E,T,I,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,E,T,I,O,G],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,E,T,I,O,G,re,Ve,we,xe],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),d=c(!1),g=c(),m=c(!1),w=x=>{d.value=!0,g.value=x};return(x,o)=>{const b=te("IconBtn"),y=qe;return f(),R(L,null,[e(ae,null,{default:t(()=>[(f(!0),R(L,null,ee(n(k),i=>(f(),S(A,{key:i.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,null,{default:t(()=>[e(z,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",Je," Total "+h(i.users.length)+" users ",1),e(ie),a("div",Ke,[(f(!0),R(L,null,ee(i.users,(v,u)=>(f(),R(L,{key:v},[i.users.length>4&&i.users.length!==4&&u<3?(f(),S(q,{key:0,size:"40",image:v},null,8,["image"])):Z("",!0),i.users.length===4?(f(),S(q,{key:1,size:"40",image:v},null,8,["image"])):Z("",!0)],64))),128)),i.users.length>4?(f(),S(q,{key:0,color:x.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+h(i.users.length-3),1)]),_:2},1032,["color"])):Z("",!0)])]),_:2},1024),e(z,null,{default:t(()=>[a("div",We,[a("div",null,[a("h5",Xe,h(i.role),1),a("div",Ze,[a("a",{href:"javascript:void(0)",onClick:v=>w(i.details)}," Edit Role ",8,Ge)])]),e(b,null,{default:t(()=>[e(P,{icon:"tabler-copy",class:"text-high-emphasis"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(A,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,{class:"h-100",ripple:!1},{default:t(()=>[e(ae,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(A,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"85",src:n(Qe)},null,8,He)]),_:1}),e(A,{cols:"7"},{default:t(()=>[e(z,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(K,{size:"small",onClick:o[0]||(o[0]=i=>m.value=!0)},{default:t(()=>o[4]||(o[4]=[U(" Add New Role ")])),_:1,__:[4]}),o[5]||(o[5]=a("div",{class:"text-end"},[U(" Add new role,"),a("br"),U(" if it doesn't exist. ")],-1))]),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),e(y,{"is-dialog-visible":n(m),"onUpdate:isDialogVisible":o[1]||(o[1]=i=>V(m)?m.value=i:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(y,{"is-dialog-visible":n(d),"onUpdate:isDialogVisible":o[2]||(o[2]=i=>V(d)?d.value=i:null),"role-permissions":n(g),"onUpdate:rolePermissions":o[3]||(o[3]=i=>V(g)?g.value=i:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},et={class:"d-flex gap-2 align-center"},tt={class:"d-flex align-center flex-wrap gap-4"},at={class:"d-flex align-center gap-x-4"},lt={key:1},st={class:"d-flex flex-column"},rt={class:"text-base"},ot={class:"text-sm"},nt={class:"d-flex align-center gap-x-2"},it={class:"text-capitalize text-high-emphasis text-body-1"},ut={class:"text-body-1 text-high-emphasis text-capitalize"},dt={__name:"UserList",async setup(F){let k,d;const g=c(""),m=c(),w=c(),x=c(),o=c(10),b=c(1),y=c(),i=c(),v=c([]),u=_=>{var l,M;y.value=(l=_.sortBy[0])==null?void 0:l.key,i.value=(M=_.sortBy[0])==null?void 0:M.order},r=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:C,execute:D}=([k,d]=ye(()=>$e(Pe("/apps/users",{query:{q:g,status:x,plan:w,role:m,itemsPerPage:o,page:b,sortBy:y,orderBy:i}}))),k=await k,d(),k),p=J(()=>C.value.users),$=J(()=>C.value.totalUsers),ue=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],W=_=>{const l=_.toLowerCase();return l==="subscriber"?{color:"primary",icon:"tabler-user"}:l==="author"?{color:"warning",icon:"tabler-settings"}:l==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:l==="editor"?{color:"info",icon:"tabler-pencil"}:l==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},de=_=>{const l=_.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},X=c(!1),me=async _=>{await oe("/apps/users",{method:"POST",body:_}),D()},le=async _=>{await oe(`/apps/users/${_}`,{method:"DELETE"});const l=v.value.findIndex(M=>M===_);l!==-1&&v.value.splice(l,1),D()};return(_,l)=>{const M=Ce,ce=ne,pe=te("RouterLink"),se=te("IconBtn"),fe=ke;return f(),R("section",null,[e(Q,null,{default:t(()=>[e(z,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",et,[l[8]||(l[8]=a("p",{class:"text-body-1 mb-0"}," Show ",-1)),e(M,{"model-value":n(o),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=parseInt(s,10))},null,8,["model-value"])]),e(ie),a("div",tt,[e(ce,{modelValue:n(g),"onUpdate:modelValue":l[1]||(l[1]=s=>V(g)?g.value=s:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(M,{modelValue:n(m),"onUpdate:modelValue":l[2]||(l[2]=s=>V(m)?m.value=s:null),placeholder:"Select Role",items:ue,clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue"])])]),_:1}),e(Re),e(Ae,{"items-per-page":n(o),"onUpdate:itemsPerPage":l[4]||(l[4]=s=>V(o)?o.value=s:null),"model-value":n(v),"onUpdate:modelValue":l[5]||(l[5]=s=>V(v)?v.value=s:null),page:n(b),"onUpdate:page":l[6]||(l[6]=s=>V(b)?b.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:n(p),"items-length":n($),headers:r,class:"text-no-wrap","show-select":"","onUpdate:options":u},{"item.user":t(({item:s})=>[a("div",at,[e(q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:W(s.role).color},{default:t(()=>[s.avatar?(f(),S(Ee,{key:0,src:s.avatar},null,8,["src"])):(f(),R("span",lt,h(("avatarText"in _?_.avatarText:n(Ue))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",st,[a("h6",rt,[e(pe,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[U(h(s.fullName),1)]),_:2},1032,["to"])]),a("div",ot,h(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",nt,[e(P,{size:22,icon:W(s.role).icon,color:W(s.role).color},null,8,["icon","color"]),a("div",it,h(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",ut,h(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(Be,{color:de(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[U(h(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(se,{onClick:ve=>le(s.id)},{default:t(()=>[e(P,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(se,null,{default:t(()=>[e(P,{icon:"tabler-eye"})]),_:1}),e(K,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(P,{icon:"tabler-dots-vertical"}),e(Me,{activator:"parent"},{default:t(()=>[e(Se,null,{default:t(()=>[e(H,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e(P,{icon:"tabler-eye"})]),default:t(()=>[e(Y,null,{default:t(()=>l[9]||(l[9]=[U("View")])),_:1,__:[9]})]),_:2},1032,["to"]),e(H,{link:""},{prepend:t(()=>[e(P,{icon:"tabler-pencil"})]),default:t(()=>[e(Y,null,{default:t(()=>l[10]||(l[10]=[U("Edit")])),_:1,__:[10]})]),_:1}),e(H,{onClick:ve=>le(s.id)},{prepend:t(()=>[e(P,{icon:"tabler-trash"})]),default:t(()=>[e(Y,null,{default:t(()=>l[11]||(l[11]=[U("Delete")])),_:1,__:[11]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(fe,{page:n(b),"onUpdate:page":l[3]||(l[3]=s=>V(b)?b.value=s:null),"items-per-page":n(o),"total-items":n($)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(De,{"is-drawer-open":n(X),"onUpdate:isDrawerOpen":l[7]||(l[7]=s=>V(X)?X.value=s:null),onUserData:me},null,8,["is-drawer-open"])])}}},da={__name:"index",setup(F){return(k,d)=>(f(),S(ae,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>d[0]||(d[0]=[a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1,__:[0]}),e(A,{cols:"12"},{default:t(()=>[e(Ye)]),_:1}),e(A,{cols:"12"},{default:t(()=>d[1]||(d[1]=[a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),a("p",{class:"text-body-1 mb-0"}," Find all of your company’s administrator accounts and their associate roles. ",-1)])),_:1,__:[1]}),e(A,{cols:"12"},{default:t(()=>[e(dt)]),_:1})]),_:1}))}};export{da as default};
