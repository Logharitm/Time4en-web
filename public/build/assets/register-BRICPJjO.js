import{r as _,e as E}from"./validators-DpYrMFzk.js";import{aA as I,dp as y,r as V,i as N,a as S,c as U,o as k,b as e,e as a,d as n,l as r,G as x,t as m,ak as L,f as M,k as $,s as w,a5 as j,F as D}from"./main-0PgqN81N.js";import{_ as G}from"./AppTextField-Dm5AP5J7.js";import{V as O}from"./VNodeRenderer-CHOBHExW.js";import{u as q}from"./useGenerateImageVariant-CAkYwNrV.js";import{m as z,a as H}from"./misc-mask-light-Bi5cOsdU.js";import{$ as J}from"./api-CUfYf9yJ.js";import{a as d,V as C}from"./VRow-D57pfwI9.js";import{V as K}from"./VImg-C5ky5xIb.js";import{V as Q}from"./VCard-DefApg5A.js";import{V as P}from"./VCardText-BUVug7pU.js";import{V as W}from"./VForm-B6nsjjf_.js";import{V as X}from"./VCheckbox-C0o6iMuH.js";import{V as Y}from"./form-0wf954Uo.js";import{V as Z}from"./VAlert-C-jeThSC.js";import"./helpers-DK5QwNv0.js";import"./VTextField-Cmk2ESJW.js";/* empty css                   */import"./VCounter-BDanIorW.js";import"./VField-ocio1nK4.js";import"./easing-Bybner-F.js";import"./VInput-B-uwcXe_.js";import"./forwardRefs-C-GTDzx5.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-yT3EycYK.js";import"./VCheckboxBtn-BpG-VOc1.js";import"./VSelectionControl-Dugcz7bl.js";const ee={class:"auth-logo d-flex align-center gap-x-3"},ae={class:"auth-title"},re={class:"position-relative bg-background w-100 me-0"},se={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"100px"}},le=["src"],oe={class:"text-h4 mb-1"},te={class:"d-flex align-center my-4"},ie={class:"me-1"},ne={href:"javascript:void(0)",class:"text-primary"},Le={__name:"register",setup(de){const{t:i}=I({useScope:"global"}),R=q(y,y,y,y,!0),T=q(H,z),l=V({name:"",email:"",password:"",password_confirmation:"",privacyPolicies:!1}),f=V(!1),h=V(),F=N(),c=V({name:void 0,email:void 0,password:void 0}),b=V(null),A=async()=>{try{const s=await J("/register",{method:"POST",body:{name:l.value.name,email:l.value.email,password:l.value.password,password_confirmation:l.value.password_confirmation},onResponseError({response:u}){var p,t;if((p=u._data)!=null&&p.errors){const g={};u._data.errors.forEach(v=>{g[v.field]||(g[v.field]=[]),g[v.field].push(v.message)}),c.value=g}else(t=u._data)!=null&&t.message&&(c.value={email:[u._data.message]})}});((s==null?void 0:s.status)??s)==="success"&&F.replace("/login")}catch(s){console.error("Register error:",s),c.value={email:[i("register.errorTryAgain")]}}},B=()=>{var s;(s=h.value)==null||s.validate().then(({valid:o})=>{o&&l.value.privacyPolicies&&A()})};return(s,o)=>{const u=S("RouterLink"),p=G;return k(),U(D,null,[e(u,{to:"/"},{default:a(()=>[n("div",ee,[e(r(O),{nodes:r(x).app.logo},null,8,["nodes"]),n("h1",ae,m(r(x).app.title),1)])]),_:1}),e(C,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:a(()=>[e(d,{md:"8",class:"d-none d-md-flex"},{default:a(()=>[n("div",re,[n("div",se,[e(K,{"max-width":"500",src:r(R),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),n("img",{class:"auth-footer-mask",src:r(T),alt:"auth-footer-mask",height:"280",width:"100"},null,8,le)])]),_:1}),e(d,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:a(()=>[e(Q,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:a(()=>[e(P,null,{default:a(()=>[n("h4",oe,m(r(i)("register.title")),1)]),_:1}),e(P,null,{default:a(()=>[e(r(W),{ref_key:"refVForm",ref:h,onSubmit:L(B,["prevent"])},{default:a(()=>[e(C,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.name=t),label:r(i)("register.name"),rules:["requiredValidator"in s?s.requiredValidator:r(_)],"error-messages":c.value.name,autofocus:""},null,8,["modelValue","label","rules","error-messages"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:l.value.email,"onUpdate:modelValue":o[1]||(o[1]=t=>l.value.email=t),label:r(i)("register.email"),type:"email",rules:["requiredValidator"in s?s.requiredValidator:r(_),"emailValidator"in s?s.emailValidator:r(E)],"error-messages":c.value.email},null,8,["modelValue","label","rules","error-messages"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:l.value.password,"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.password=t),label:r(i)("register.password"),type:f.value?"text":"password",rules:["requiredValidator"in s?s.requiredValidator:r(_)],"error-messages":c.value.password,autocomplete:"new-password",placeholder:"••••••••","append-inner-icon":f.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[3]||(o[3]=t=>f.value=!f.value)},null,8,["modelValue","label","type","rules","error-messages","append-inner-icon"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:l.value.password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=t=>l.value.password_confirmation=t),label:r(i)("register.confirmPassword"),type:f.value?"text":"password",rules:["requiredValidator"in s?s.requiredValidator:r(_)],autocomplete:"new-password",placeholder:"••••••••"},null,8,["modelValue","label","type","rules"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[n("div",te,[e(X,{modelValue:l.value.privacyPolicies,"onUpdate:modelValue":o[5]||(o[5]=t=>l.value.privacyPolicies=t),inline:""},null,8,["modelValue"]),e(Y,{for:"privacy-policy"},{default:a(()=>[n("span",ie,m(r(i)("register.agreeText")),1),n("a",ne,m(r(i)("register.privacyPolicy")),1)]),_:1})])]),_:1}),b.value?(k(),M(d,{key:0,cols:"12"},{default:a(()=>[e(Z,{type:"error",border:"start",class:"mb-4"},{default:a(()=>[w(m(b.value),1)]),_:1})]),_:1})):$("",!0),e(d,{cols:"12"},{default:a(()=>[e(j,{block:"",type:"submit"},{default:a(()=>[w(m(r(i)("register.submit")),1)]),_:1})]),_:1}),e(d,{cols:"12",class:"text-center text-base"},{default:a(()=>[n("span",null,m(r(i)("register.haveAccount")),1),e(u,{class:"text-primary ms-1",to:{name:"login"}},{default:a(()=>[w(m(r(i)("register.login")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Le as default};
