import{_ as ne}from"./TablePagination-DszqIqDR.js";import{_ as ie}from"./AppDateTimePicker-D6mEuVBE.js";import{_ as de}from"./AppTextField-Cy1eepAm.js";import{_ as ue}from"./AppSelect-BGSZB4rC.js";import{r,E as me,w as pe,V as ve,c as f,b as a,e as o,i as ce,a as fe,o as i,s,d,a5 as S,Z as _,t as m,f as O,k as _e}from"./main-r5bmmuWQ.js";import Ve from"./AddWordDrawer-Dk13L5Xc.js";import ye from"./EditWordDrawer-Cay1uQyZ.js";import{$ as W}from"./api-EloGVOaf.js";import{V as M,a as we,b as Q,d as ge}from"./VCard-DGerPMk6.js";import{V as be}from"./VSnackbar-CbMLQhh6.js";import{V as ke}from"./VDialog-CdCGHvXc.js";import{V as Z}from"./VCardText-DBpXmHPb.js";import{V as xe}from"./VDivider-BZWXGl3E.js";import{V as Ce}from"./VDataTableServer-CDjUWgEE.js";import{V as Te}from"./VSpacer-DG5Asd7s.js";import"./VPagination-BybBj_P8.js";import"./VField-C2khvQyN.js";import"./form-BaJUJw3K.js";import"./easing-Bybner-F.js";import"./VInput-BRCWVEBr.js";import"./VImg-D2zU12hz.js";import"./VTextField-D0ZkBYpn.js";/* empty css                   */import"./VCounter-B4qo7bYW.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-TrfaiPwN.js";import"./VList-DGdTrPIL.js";import"./ssrBoot-CihhQ_tl.js";import"./VAvatar-BS7bkXta.js";import"./dialog-transition-DaST_Slz.js";import"./VMenu-DVo4QAIr.js";import"./VOverlay-BacqU_CO.js";import"./delay-1yQ5k86k.js";import"./lazy-0Y6S5H2H.js";import"./scopeId-Bjihn7Ji.js";import"./VCheckboxBtn-BaiefQgv.js";import"./VSelectionControl-cbXjfvcA.js";import"./VChip-CCaC3J-W.js";import"./VSlideGroup-COrxtia5.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-Pbuw4vtV.js";import"./vue3-perfect-scrollbar-BISSIM6K.js";import"./VNavigationDrawer-Cb4z06DM.js";import"./VForm-DYlhTiT2.js";import"./VRow-CEsEJglO.js";/* empty css              */import"./index-CvOPxmL5.js";import"./VDataTable-DwZ9VMRm.js";import"./VTable-CO2tQWan.js";import"./filter-DoVjBxpf.js";const De={class:"d-flex flex-wrap gap-4"},Ue={class:"me-3 d-flex gap-3"},$e={style:{"min-width":"220px"}},Be={style:{"min-width":"200px"}},Se={style:{"min-width":"200px"}},We={style:{"min-width":"160px"}},Pe={style:{"min-width":"160px"}},Ae={class:"d-flex gap-3 mt-4"},Ee={key:1},Ie={key:0,class:"text-primary"},Ne={key:1},Fe={key:0,class:"text-primary"},Oe={key:1},Ot={__name:"index",setup(he){ce();const V=r(""),y=r(""),w=r(""),g=r(""),b=r(""),u=r(10),p=r(1),P=r(),A=r(),h=r([]),j=l=>{var e,n;P.value=(e=l.sortBy[0])==null?void 0:e.key,A.value=(n=l.sortBy[0])==null?void 0:n.order},T=r(!1),R=r(""),D=r("success"),v=(l,e="success")=>{R.value=l,D.value=e,T.value=!0},k=r(!1),U=r(null),q=l=>{U.value=l,k.value=!0},H=async()=>{U.value&&(await le(U.value),k.value=!1,U.value=null)},J=[{title:"الكلمة",key:"word"},{title:"الترجمة",key:"translation"},{title:"الصوت",key:"audio",sortable:!1},{title:"المجلد",key:"folder_name"},{title:"المستخدم",key:"user_name"},{title:"تاريخ الإنشاء",key:"created_at"}],Y=r([]),E=r(0),I=r(!0),K=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",x=async()=>{var l;I.value=!0;try{const e={search:V.value||void 0,user_name:y.value||void 0,folder_name:w.value||void 0,created_from:g.value||void 0,created_to:b.value||void 0,per_page:u.value,page:p.value,sort_by:P.value,sort_order:A.value},n=await W("/words",{method:"GET",params:e});n.status==="success"&&(Y.value=n.data,E.value=((l=n.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching words",e)}finally{I.value=!1}},X=()=>{V.value="",y.value="",w.value="",g.value="",b.value=""};me(()=>{x()}),pe([V,y,w,g,b,u,p,P,A],x);const ee=ve(()=>Y.value),z=r(!1),$=r(!1),G=r(null),te=l=>{G.value=l,$.value=!0},ae=async l=>{try{await W("/words",{method:"POST",body:l}),v("تم إضافة الكلمة بنجاح","success"),x()}catch{v("حدث خطأ، حاول مرة أخرى","error")}},oe=async(l,e)=>{try{await W(`/words/${l}/update`,{method:"POST",body:e}),v("تم تعديل الكلمة بنجاح","success"),x()}catch{v("حدث خطأ، حاول مرة أخرى","error")}},le=async l=>{try{await W(`/words/${l}/delete`,{method:"POST"}),v("تم حذف الكلمة بنجاح","success"),x()}catch{v("حدث خطأ أثناء الحذف","error")}},c=r(null),C=r(null),re=l=>{if(l.audio_url)if(c.value&&(c.value.pause(),c.value.currentTime=0),C.value===l.id)C.value=null,c.value=null;else{const e=new Audio(l.audio_url);c.value=e,C.value=l.id,e.play(),e.onended=()=>{C.value=null,c.value=null}}};return(l,e)=>{const n=ue,N=de,L=ie,F=fe("IconBtn"),se=ne;return i(),f("section",null,[a(M,{class:"mb-6"},{default:o(()=>[a(we,{class:"pb-4"},{default:o(()=>[a(Q,null,{default:o(()=>e[17]||(e[17]=[s("الكلمات")])),_:1,__:[17]})]),_:1}),a(Z,{class:"d-flex flex-wrap gap-4 align-center"},{default:o(()=>[d("div",De,[d("div",Ue,[a(n,{label:"عرض","model-value":u.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=parseInt(t,10))},null,8,["model-value","items"])]),d("div",$e,[a(N,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),placeholder:"بحث بالكلمة أو الترجمة",label:"بحث بالكلمة أو الترجمة"},null,8,["modelValue"])]),d("div",Be,[a(N,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=t=>y.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),d("div",Se,[a(N,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=t=>w.value=t),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),d("div",We,[a(L,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=t=>g.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),d("div",Pe,[a(L,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=t=>b.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])])]),d("div",Ae,[a(S,{"prepend-icon":"tabler-rotate-clockwise",onClick:X,variant:"outlined"},{default:o(()=>e[18]||(e[18]=[s("إعادة تعيين")])),_:1,__:[18]})])]),_:1}),a(xe),a(Ce,{"items-per-page":u.value,"onUpdate:itemsPerPage":e[7]||(e[7]=t=>u.value=t),"model-value":h.value,"onUpdate:modelValue":e[8]||(e[8]=t=>h.value=t),page:p.value,"onUpdate:page":e[9]||(e[9]=t=>p.value=t),items:ee.value,"item-value":"id","items-length":E.value,headers:J,class:"text-no-wrap",loading:I.value,"onUpdate:options":j},{"item.word":o(({item:t})=>[s(m(t.word),1)]),"item.translation":o(({item:t})=>[s(m(t.translation),1)]),"item.example_sentence":o(({item:t})=>[s(m(t.example_sentence),1)]),"item.audio":o(({item:t})=>[t.audio_url?(i(),O(F,{key:0,onClick:B=>re(t),title:"تشغيل/إيقاف"},{default:o(()=>[a(_,{icon:C.value===t.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])):(i(),f("span",Ee,"-"))]),"item.folder_name":o(({item:t})=>[t.folder_id?(i(),f("a",Ie,m(t.folder_name),1)):(i(),f("span",Ne,"-"))]),"item.user_name":o(({item:t})=>[t.user_id?(i(),f("a",Fe,m(t.user_name),1)):(i(),f("span",Oe,"-"))]),"item.created_at":o(({item:t})=>[s(m(K(t.created_at)),1)]),"item.actions":o(({item:t})=>[a(F,{onClick:B=>te(t)},{default:o(()=>[a(_,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),a(F,{onClick:B=>q(t.id)},{default:o(()=>[a(_,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:o(()=>[a(se,{page:p.value,"onUpdate:page":e[6]||(e[6]=t=>p.value=t),"items-per-page":u.value,"total-items":E.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),a(Ve,{"is-drawer-open":z.value,"onUpdate:isDrawerOpen":e[10]||(e[10]=t=>z.value=t),onWordData:ae},null,8,["is-drawer-open"]),a(ye,{"is-drawer-open":$.value,"onUpdate:isDrawerOpen":e[11]||(e[11]=t=>$.value=t),"word-data":G.value,onSubmitWord:e[12]||(e[12]=async(t,B)=>{try{await oe(t,B),$.value=!1}catch{}})},null,8,["is-drawer-open","word-data"]),a(be,{modelValue:T.value,"onUpdate:modelValue":e[14]||(e[14]=t=>T.value=t),color:D.value,location:"top end",timeout:"5000"},{prepend:o(()=>[D.value==="success"?(i(),O(_,{key:0,icon:"tabler-check"})):D.value==="error"?(i(),O(_,{key:1,icon:"tabler-alert-circle"})):_e("",!0)]),actions:o(()=>[a(S,{icon:"",variant:"text",color:"white",onClick:e[13]||(e[13]=t=>T.value=!1)},{default:o(()=>[a(_,{icon:"tabler-x"})]),_:1})]),default:o(()=>[s(" "+m(R.value)+" ",1)]),_:1},8,["modelValue","color"]),a(ke,{modelValue:k.value,"onUpdate:modelValue":e[16]||(e[16]=t=>k.value=t),"max-width":"500px"},{default:o(()=>[a(M,null,{default:o(()=>[a(Q,{class:"text-h6"},{default:o(()=>e[19]||(e[19]=[s("تأكيد الحذف")])),_:1,__:[19]}),a(Z,null,{default:o(()=>e[20]||(e[20]=[s("هل أنت متأكد أنك تريد حذف هذه الكلمة؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[20]}),a(ge,{class:"px-6 pb-4"},{default:o(()=>[a(Te),a(S,{color:"error",variant:"flat",onClick:e[15]||(e[15]=t=>k.value=!1)},{default:o(()=>e[21]||(e[21]=[s("إلغاء")])),_:1,__:[21]}),a(S,{color:"success",variant:"flat",onClick:H},{default:o(()=>e[22]||(e[22]=[s("موافق")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Ot as default};
