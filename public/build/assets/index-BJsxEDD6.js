import{_ as ae}from"./TablePagination-DszqIqDR.js";import{_ as le}from"./AppDateTimePicker-D6mEuVBE.js";import{_ as re}from"./AppTextField-Cy1eepAm.js";import{_ as se}from"./AppSelect-BGSZB4rC.js";import{r,E as ie,w as ne,V as de,c as ue,b as o,e as a,i as me,a as pe,o as B,s as i,d as m,a5 as k,Z as g,t as x,f as Y,k as ce}from"./main-r5bmmuWQ.js";import ve from"./AddFolderDrawer-vD2RPCC4.js";import fe from"./EditFolderDrawer-BcbYjnlx.js";import{$ as D}from"./api-EloGVOaf.js";import{V as z,a as _e,b as G,d as Ve}from"./VCard-DGerPMk6.js";import{V as ge}from"./VSnackbar-CbMLQhh6.js";import{V as ye}from"./VDialog-CdCGHvXc.js";import{V as L}from"./VCardText-DBpXmHPb.js";import{V as M}from"./VSpacer-DG5Asd7s.js";import{V as we}from"./VDivider-BZWXGl3E.js";import{V as be}from"./VDataTableServer-CDjUWgEE.js";import"./VPagination-BybBj_P8.js";import"./VField-C2khvQyN.js";import"./form-BaJUJw3K.js";import"./easing-Bybner-F.js";import"./VInput-BRCWVEBr.js";import"./VImg-D2zU12hz.js";import"./VTextField-D0ZkBYpn.js";/* empty css                   */import"./VCounter-B4qo7bYW.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-TrfaiPwN.js";import"./VList-DGdTrPIL.js";import"./ssrBoot-CihhQ_tl.js";import"./VAvatar-BS7bkXta.js";import"./dialog-transition-DaST_Slz.js";import"./VMenu-DVo4QAIr.js";import"./VOverlay-BacqU_CO.js";import"./delay-1yQ5k86k.js";import"./lazy-0Y6S5H2H.js";import"./scopeId-Bjihn7Ji.js";import"./VCheckboxBtn-BaiefQgv.js";import"./VSelectionControl-cbXjfvcA.js";import"./VChip-CCaC3J-W.js";import"./VSlideGroup-COrxtia5.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppTextarea-Byb1EVH6.js";import"./VTextarea-DFqb36SZ.js";import"./AppDrawerHeaderSection-Pbuw4vtV.js";import"./vue3-perfect-scrollbar-BISSIM6K.js";import"./VNavigationDrawer-Cb4z06DM.js";import"./VForm-DYlhTiT2.js";import"./VRow-CEsEJglO.js";/* empty css              */import"./index-CvOPxmL5.js";import"./VDataTable-DwZ9VMRm.js";import"./VTable-CO2tQWan.js";import"./filter-DoVjBxpf.js";const ke={class:"me-3 d-flex gap-3"},xe={style:{"min-width":"200px"}},De={style:{"min-width":"200px"}},Ce={style:{"min-width":"160px"}},Te={style:{"min-width":"160px"}},Ue={class:"text-primary"},Ft={__name:"index",setup(Fe){me();const p=r(""),c=r(""),v=r(""),f=r(""),n=r(10),d=r(1),C=r(),T=r(),P=r([]),Q=l=>{var e,s;C.value=(e=l.sortBy[0])==null?void 0:e.key,T.value=(s=l.sortBy[0])==null?void 0:s.order},y=r(!1),S=r(""),w=r("success"),u=(l,e="success")=>{S.value=l,w.value=e,y.value=!0},_=r(!1),b=r(null),Z=l=>{b.value=l,_.value=!0},j=async()=>{b.value&&(await ee(b.value),_.value=!1,b.value=null)},q=[{title:"اسم المجلد",key:"name"},{title:"عدد الكلمات",key:"words_count"},{title:"الوصف",key:"description"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"المستخدم",key:"user_name"}],E=r([]),U=r(0),F=r(!0),H=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",V=async()=>{var l;F.value=!0;try{const e={search:p.value||void 0,user_name:c.value||void 0,created_from:v.value||void 0,created_to:f.value||void 0,per_page:n.value,page:d.value,sort_by:C.value,sort_order:T.value},s=await D("/folders",{method:"GET",params:e});s.status==="success"&&(E.value=s.data,U.value=((l=s.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching folders",e)}finally{F.value=!1}},J=()=>{p.value="",c.value="",v.value="",f.value=""};ie(()=>{V()}),ne([p,c,v,f,n,d,C,T],V);const K=de(()=>E.value),I=r(!1),$=r(!1),N=r(null),W=l=>{N.value=l,$.value=!0},X=async l=>{try{await D("/folders",{method:"POST",body:l}),u("تم إضافة المجلد بنجاح","success"),V()}catch{u("حدث خطأ، حاول مرة أخرى","error")}},h=async(l,e)=>{try{await D(`/folders/${l}/update`,{method:"POST",body:e}),u("تم تعديل المجلد بنجاح","success"),V()}catch{u("حدث خطأ، حاول مرة أخرى","error")}},ee=async l=>{try{await D(`/folders/${l}/delete`,{method:"POST"}),u("تم حذف المجلد بنجاح","success"),V()}catch{u("حدث خطأ أثناء الحذف","error")}};return(l,e)=>{const s=se,O=re,A=le,R=pe("IconBtn"),te=ae;return B(),ue("section",null,[o(z,{class:"mb-6"},{default:a(()=>[o(_e,{class:"pb-4"},{default:a(()=>[o(G,null,{default:a(()=>e[15]||(e[15]=[i("المجلدات")])),_:1,__:[15]})]),_:1}),o(L,{class:"d-flex flex-wrap gap-4 align-center"},{default:a(()=>[m("div",ke,[o(s,{label:"عرض","model-value":n.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=parseInt(t,10))},null,8,["model-value","items"])]),m("div",xe,[o(O,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),placeholder:"بحث باسم المجلد او الوصف",label:"اسم المجلد او الوصف"},null,8,["modelValue"])]),m("div",De,[o(O,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),m("div",Ce,[o(A,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),m("div",Te,[o(A,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),o(M),o(k,{"prepend-icon":"tabler-rotate-clockwise",onClick:J,variant:"outlined"},{default:a(()=>e[16]||(e[16]=[i(" إعادة تعيين ")])),_:1,__:[16]})]),_:1}),o(we),o(be,{"items-per-page":n.value,"onUpdate:itemsPerPage":e[6]||(e[6]=t=>n.value=t),"model-value":P.value,"onUpdate:modelValue":e[7]||(e[7]=t=>P.value=t),page:d.value,"onUpdate:page":e[8]||(e[8]=t=>d.value=t),items:K.value,"item-value":"id","items-length":U.value,headers:q,class:"text-no-wrap",loading:F.value,"onUpdate:options":Q},{"item.user_name":a(({item:t})=>[m("a",Ue,x(t.user_name),1)]),"item.created_at":a(({item:t})=>[i(x(H(t.created_at)),1)]),"item.words_count":a(({item:t})=>[i(x(t.words_count),1)]),"item.actions":a(({item:t})=>[o(R,{onClick:oe=>W(t)},{default:a(()=>[o(g,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),o(R,{onClick:oe=>Z(t.id)},{default:a(()=>[o(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:a(()=>[o(te,{page:d.value,"onUpdate:page":e[5]||(e[5]=t=>d.value=t),"items-per-page":n.value,"total-items":U.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(ve,{"is-drawer-open":I.value,"onUpdate:isDrawerOpen":e[9]||(e[9]=t=>I.value=t),onFolderData:X},null,8,["is-drawer-open"]),o(fe,{"is-drawer-open":$.value,"onUpdate:isDrawerOpen":e[10]||(e[10]=t=>$.value=t),"folder-data":N.value,onFolderData:h},null,8,["is-drawer-open","folder-data"]),o(ge,{modelValue:y.value,"onUpdate:modelValue":e[12]||(e[12]=t=>y.value=t),color:w.value,location:"top end",timeout:"5000"},{prepend:a(()=>[w.value==="success"?(B(),Y(g,{key:0,icon:"tabler-check"})):w.value==="error"?(B(),Y(g,{key:1,icon:"tabler-alert-circle"})):ce("",!0)]),actions:a(()=>[o(k,{icon:"",variant:"text",color:"white",onClick:e[11]||(e[11]=t=>y.value=!1)},{default:a(()=>[o(g,{icon:"tabler-x"})]),_:1})]),default:a(()=>[i(" "+x(S.value)+" ",1)]),_:1},8,["modelValue","color"]),o(ye,{modelValue:_.value,"onUpdate:modelValue":e[14]||(e[14]=t=>_.value=t),"max-width":"500px"},{default:a(()=>[o(z,null,{default:a(()=>[o(G,{class:"text-h6"},{default:a(()=>e[17]||(e[17]=[i("تأكيد الحذف")])),_:1,__:[17]}),o(L,null,{default:a(()=>e[18]||(e[18]=[i("هل أنت متأكد أنك تريد حذف هذا المجلد؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[18]}),o(Ve,{class:"px-6 pb-4"},{default:a(()=>[o(M),o(k,{color:"error",variant:"flat",onClick:e[13]||(e[13]=t=>_.value=!1)},{default:a(()=>e[19]||(e[19]=[i("إلغاء")])),_:1,__:[19]}),o(k,{color:"success",variant:"flat",onClick:j},{default:a(()=>e[20]||(e[20]=[i("موافق")])),_:1,__:[20]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Ft as default};
