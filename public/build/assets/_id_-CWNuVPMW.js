import{N as X,F as Y}from"./front-page-navbar-B5iZP-0M.js";import ee from"./AddWordDrawer-CHn1J53u.js";import te from"./EditWordDrawer-Cdcd1yk1.js";import{_ as ae,u as oe,r,aB as le,V as re,E as se,a as ne,c as V,o as n,b as a,e as l,f as v,k as w,s as i,Z as c,t as s,d,a5 as p,F as ie,h as ue,l as de}from"./main-BPcb-ZaY.js";import{$ as k}from"./api-DG2nE6gD.js";import{V as ce}from"./VBreadcrumbs-Ba1Cke-x.js";import{a as $,V as pe}from"./VRow-QcEsWbXZ.js";import{V as z}from"./VContainer-DvhfSyvy.js";import{V as I,b as me,d as fe}from"./VCard-Q89owb9Y.js";import{V as B}from"./VCardText-DiNrUOWO.js";import{V as ve}from"./VPagination-DCgSxVQK.js";import{V as _e}from"./VSpacer-DHD1elo7.js";import{V as ye}from"./VDialog-CUMV5Mbr.js";import{V as ge}from"./VSnackbar-BKdAKFlJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue3-perfect-scrollbar-J40RpoMO.js";import"./VNodeRenderer-1rnWHIIr.js";import"./NavBarNotifications-DckC7Arf.js";/* empty css                                                      */import"./VBadge-BTQblzFx.js";import"./VImg-VPIdDB_b.js";import"./VMenu-BRo6jr-H.js";import"./VOverlay-DPRPBU5U.js";import"./easing-Bybner-F.js";import"./delay-DcS3KZhz.js";import"./lazy-S5qe_EGE.js";import"./scopeId-CBQXlYyl.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-G3ULLPVD.js";import"./VChip-C1JWP4IF.js";import"./VSlideGroup-DCs3CehJ.js";import"./VAvatar-DUUy6K_D.js";import"./VDivider-BPUCVVfZ.js";import"./VList-Cnnr8GLe.js";import"./ssrBoot-B6KZlFql.js";import"./index-CvOPxmL5.js";/* empty css              */import"./I18n-DwQwDG9R.js";import"./VNavigationDrawer-Bysln3-h.js";import"./VToolbar-NeHmMQ3C.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppTextField-C3xorJQD.js";import"./form-CUaSfr2z.js";import"./VTextField-B6-iLHcB.js";/* empty css                   */import"./VCounter-kVyvVVHj.js";import"./VField-AgHU-S6x.js";import"./VInput-DBcQx_Kb.js";import"./AppSelect-CnH-f0hI.js";import"./VSelect-DPp9CqUW.js";import"./VCheckboxBtn-BpYfQo4Q.js";import"./VSelectionControl-BgDnKmlr.js";import"./AppDrawerHeaderSection-CiXL8jSx.js";import"./VForm-CPp5e7Lw.js";const Ve={class:"landing-page-wrapper"},we={key:1,class:"d-flex align-center"},ke={id:"words"},be={class:"d-flex justify-space-between align-center mb-6"},he={class:"text-h4"},xe={class:"main-word-box d-flex align-center justify-space-between"},$e={class:"translation-en"},Ce={class:"example-box d-flex align-center justify-space-between",style:{direction:"ltr"}},Se={class:"sentence"},Te={class:"v-row",style:{padding:"10px"}},De={key:0,class:"text-center py-6"},Ee={key:1,class:"d-flex justify-center my-6"},Nt={__name:"[id]",setup(Ue){const L=ae(),C=oe(),R=r(),N=r([]),_=r(!1),O=r(""),m=r(1),P=r(20),S=r(1),T=r(!1),D=r(!1),A=r(null),y=r(!1),b=r(null),u=r(null),f=r(null),h=r(!1),F=r(""),x=r("success"),E=(t,e="success")=>{F.value=t,x.value=e,h.value=!0},g=async(t=1)=>{_.value=!0;try{const e=await k(`/words?folder_id=${C.params.id}&page=${t}&per_page=${P.value}`,{method:"GET"});e.status==="success"&&e.data&&(N.value=e.data||[],e.meta&&(m.value=e.meta.current_page,P.value=e.meta.per_page,S.value=e.meta.last_page))}catch(e){console.error("Error fetching words",e)}finally{_.value=!1}},G=async()=>{try{const t=await k(`/folders/${C.params.id}`,{method:"GET"});t.status==="success"&&t.data&&(O.value=t.data.name)}catch(t){console.error("Error fetching folder",t)}finally{_.value=!1}},M=async t=>{try{const e=await k("/words",{method:"POST",body:t});if(e.status==="error"){E(e.message||$t("حدث خطأ أثناء إضافة الكلمة"),"error");return}g(m.value),E($t("تم إضافة الكلمة بنجاح"),"success")}catch{E($t("حدث خطأ غير متوقع"),"error")}},Z=async(t,e)=>{try{await k(`/words/${t}/update`,{method:"POST",body:e}),g(m.value)}catch(U){console.error("Error editing word",U)}},q=t=>{b.value=t,y.value=!0},H=async()=>{if(b.value)try{await k(`/words/${b.value}/delete`,{method:"POST"}),g(m.value)}catch(t){console.error("Error deleting word",t)}finally{y.value=!1,b.value=null}},J=t=>{if(u.value&&(u.value.pause(),u.value.currentTime=0,u.value=null),f.value===t.id){f.value=null;return}if(f.value=t.id,t.audio_url&&t.audio_url!=="null"){const e=new Audio(t.audio_url);u.value=e,e.play(),e.onended=()=>{f.value=null,u.value=null},e.onerror=()=>{u.value=null,j(t.word)}}else j(t.word)};function j(t){if(!t)return;const e=new SpeechSynthesisUtterance(t);e.lang="en-US",e.rate=1,e.pitch=1,speechSynthesis.cancel(),speechSynthesis.speak(e),e.onend=()=>{f.value=null}}function K(t){if(!t)return;const e=new SpeechSynthesisUtterance(t);e.lang="en-US",speechSynthesis.cancel(),speechSynthesis.speak(e)}le(()=>{u.value&&(u.value.pause(),u.value=null),speechSynthesis.cancel()});const Q=re(()=>[{text:"الرئيسية",to:"/",icon:"tabler-home"},{text:"المجلدات",to:"/folders",icon:"tabler-folders"},{text:O.value||"...",to:null},{text:"الكلمات",to:null}]);return L.skin="default",se(()=>{G(),g(m.value)}),(t,e)=>{const U=ne("RouterLink");return n(),V("div",Ve,[a(X,{"active-id":R.value},null,8,["active-id"]),a(z,{class:"page-content-wrapper",style:{"margin-top":"140px !important"}},{default:l(()=>[a(ce,{items:Q.value,divider:">"},{item:l(({item:o})=>[o.to?(n(),v(U,{key:0,to:o.to,class:"d-flex align-center"},{default:l(()=>[o.icon?(n(),v(c,{key:0,icon:o.icon,size:"18",class:"mr-1"},null,8,["icon"])):w("",!0),i(" "+s(o.text),1)]),_:2},1032,["to"])):(n(),V("span",we,[o.icon?(n(),v(c,{key:0,icon:o.icon,size:"18",class:"mr-1"},null,8,["icon"])):w("",!0),i(" "+s(o.text),1)]))]),_:1},8,["items"]),a($,{cols:"12"},{default:l(()=>[d("div",ke,[a(z,null,{default:l(()=>[d("div",be,[d("h4",he,s(t.$t("Words")),1),a(p,{color:"primary",onClick:e[0]||(e[0]=o=>T.value=!0)},{default:l(()=>[a(c,{class:"tabler-plus ml-2"}),i(" "+s(t.$t("Add Word")),1)]),_:1})]),a(pe,null,{default:l(()=>[(n(!0),V(ie,null,ue(N.value,o=>(n(),v($,{key:o.id,cols:"12",sm:"6",lg:"4"},{default:l(()=>[a(I,{class:"word-card"},{default:l(()=>[d("div",xe,[d("span",null,s(o.word),1),a(p,{icon:"",size:"small",color:"white",variant:"text",class:"play-btn",onClick:W=>J(o)},{default:l(()=>[a(c,{icon:f.value===o.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])]),a(B,null,{default:l(()=>[d("p",$e,[i(s(t.$t("Translation"))+": ",1),d("b",null,s(o.translation||"-"),1)])]),_:2},1024),a(B,null,{default:l(()=>[d("div",Ce,[d("span",Se,s(o.example_sentence||"-"),1),a(p,{icon:"",color:"primary",size:"small",onClick:W=>K(o.example_sentence)},{default:l(()=>[a(c,{icon:"tabler-volume"})]),_:2},1032,["onClick"])])]),_:2},1024),d("div",Te,[a($,null,{default:l(()=>[a(p,{color:"primary",variant:"outlined",block:"",onClick:W=>(A.value=o,D.value=!0)},{default:l(()=>[i(s(t.$t("Edit")),1)]),_:2},1032,["onClick"])]),_:2},1024),a($,null,{default:l(()=>[a(p,{color:"primary",variant:"outlined",block:"",onClick:W=>q(o.id)},{default:l(()=>[i(s(t.$t("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),_.value?(n(),V("div",De,s(t.$t("Loading"))+"... ",1)):w("",!0),!_.value&&S.value>1?(n(),V("div",Ee,[a(ve,{modelValue:m.value,"onUpdate:modelValue":[e[1]||(e[1]=o=>m.value=o),g],length:S.value,"total-visible":"7"},null,8,["modelValue","length"])])):w("",!0)]),_:1})])]),_:1})]),_:1}),a(Y),a(ee,{"is-drawer-open":T.value,"onUpdate:isDrawerOpen":e[2]||(e[2]=o=>T.value=o),"folder-id":de(C).params.id,onWordData:M},null,8,["is-drawer-open","folder-id"]),a(te,{"is-drawer-open":D.value,"onUpdate:isDrawerOpen":e[3]||(e[3]=o=>D.value=o),"word-data":A.value,onSubmitWord:Z},null,8,["is-drawer-open","word-data"]),a(ye,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=o=>y.value=o),"max-width":"500px"},{default:l(()=>[a(I,null,{default:l(()=>[a(me,{class:"text-h6"},{default:l(()=>e[8]||(e[8]=[i(" تأكيد الحذف ")])),_:1,__:[8]}),a(B,null,{default:l(()=>e[9]||(e[9]=[i("هل أنت متأكد أنك تريد حذف هذه الكلمة؟")])),_:1,__:[9]}),a(fe,{class:"px-6 pb-4"},{default:l(()=>[a(_e),a(p,{color:"error",variant:"flat",onClick:e[4]||(e[4]=o=>y.value=!1)},{default:l(()=>e[10]||(e[10]=[i(" إلغاء ")])),_:1,__:[10]}),a(p,{color:"success",variant:"flat",onClick:H},{default:l(()=>e[11]||(e[11]=[i(" موافق ")])),_:1,__:[11]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ge,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=o=>h.value=o),color:x.value,location:"top end",timeout:"5000"},{prepend:l(()=>[x.value==="success"?(n(),v(c,{key:0,icon:"tabler-check"})):x.value==="error"?(n(),v(c,{key:1,icon:"tabler-alert-circle"})):w("",!0)]),actions:l(()=>[a(p,{icon:"",variant:"text",color:"white",onClick:e[6]||(e[6]=o=>h.value=!1)},{default:l(()=>[a(c,{icon:"tabler-x"})]),_:1})]),default:l(()=>[i(" "+s(F.value)+" ",1)]),_:1},8,["modelValue","color"])])}}};export{Nt as default};
