import{_ as L}from"./TablePagination-Czr1Wd2e.js";import{_ as O}from"./AppDateTimePicker-Czszlx19.js";import{_ as Q}from"./AppTextField-kQMYcegG.js";import{_ as Z}from"./AppSelect-DOdzD_nJ.js";import{r as a,E as j,w as H,V as J,c as _,b as o,e as l,i as K,o as n,s as u,d,a5 as T,l as U,t as g,ak as z,Z as $,f as E,k as W}from"./main-DhBDkIM8.js";import{$ as X}from"./api-xPQ-H3zP.js";import{V as ee,a as te,b as ae}from"./VCard-ZO35TGNH.js";import{V as oe}from"./VSnackbar-Byr28B1s.js";import{V as le}from"./VCardText-86VRgrq3.js";import{V as re}from"./VDivider-CxWJNJO1.js";import{V as se}from"./VDataTableServer-Cjf_NZ5r.js";import"./VPagination-wvUri8Z1.js";import"./VField-B2IViuzI.js";import"./form-BZoX7eNd.js";import"./easing-Bybner-F.js";import"./VInput-rRCuKDOV.js";import"./VImg-BCDnx1qz.js";import"./VTextField-Bf3AhhwK.js";/* empty css                   */import"./VCounter-Cn3InwYI.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-pRPNbFAR.js";import"./VList-XzurmwXw.js";import"./ssrBoot-5jN3ZJGW.js";import"./VAvatar-BWy3UfGn.js";import"./dialog-transition-D9UNtcLm.js";import"./VMenu-CLM2NJLD.js";import"./VOverlay-oz3EBx-C.js";import"./delay-Bu-Jg8S8.js";import"./lazy-Ccc3uhEi.js";import"./scopeId-CFSUuaff.js";import"./VCheckboxBtn-Rqv6vJcV.js";import"./VSelectionControl-CwTGUrxv.js";import"./VChip-5t0IIyRb.js";import"./VSlideGroup-BX3S9cBv.js";import"./index-CvOPxmL5.js";import"./VDataTable-DY7Y2gGQ.js";import"./VTable-DyJW21RH.js";import"./filter-BvCDJFvM.js";const ie={class:"d-flex flex-wrap gap-4"},ne={class:"me-3 d-flex gap-3"},de={style:{"min-width":"200px"}},me={style:{"min-width":"200px"}},ue={style:{"min-width":"160px"}},pe={style:{"min-width":"160px"}},ce={class:"d-flex gap-3 mt-4"},ve=["onClick"],fe={key:1},_e=["onClick"],ge={key:1},lt={__name:"index",setup(ye){const y=K(),V=a(""),p=a(""),c=a(""),v=a(""),f=a(""),i=a(10),m=a(1),k=a(),w=a(),B=a([]),I=r=>{var t,s;k.value=(t=r.sortBy[0])==null?void 0:t.key,w.value=(s=r.sortBy[0])==null?void 0:s.order},x=a(!1),A=a(""),b=a("success");a(!1),a(null);const M=[{title:"ID",key:"id"},{title:"المستخدم",key:"user_name"},{title:"المجلد",key:"folder_name"},{title:"عدد الأسئلة",key:"total_words"},{title:"الإجابات الصحيحة",key:"correct_answers"},{title:"الإجابات الخاطئة",key:"wrong_answers"},{title:"النسبة %",key:"score_percentage"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"العمليات",key:"actions",sortable:!1}],D=a([]),C=a(0),h=a(!0),R=r=>r?new Date(r).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",P=async()=>{var r;h.value=!0;try{const t={search:V.value||void 0,user_name:p.value||void 0,folder_name:c.value||void 0,created_from:v.value||void 0,created_to:f.value||void 0,per_page:i.value,page:m.value,sort_by:k.value,sort_order:w.value},s=await X("/practices",{method:"GET",params:t});s.status==="success"&&(D.value=s.data,C.value=((r=s.meta)==null?void 0:r.total)||0)}catch(t){console.error("Error fetching practices",t)}finally{h.value=!1}},Y=()=>{V.value="",p.value="",c.value="",v.value="",f.value=""};j(()=>{P()}),H([V,p,c,v,f,i,m,k,w],P);const q=J(()=>D.value);return(r,t)=>{const s=Z,F=Q,N=O,G=L;return n(),_("section",null,[o(ee,{class:"mb-6"},{default:l(()=>[o(te,{class:"pb-4"},{default:l(()=>[o(ae,null,{default:l(()=>t[11]||(t[11]=[u("الاختبارات")])),_:1,__:[11]})]),_:1}),o(le,{class:"d-flex flex-wrap gap-4 align-center"},{default:l(()=>[d("div",ie,[d("div",ne,[o(s,{label:"عرض","model-value":i.value,items:[10,25,50,100].map(e=>({value:e,title:e})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=parseInt(e,10))},null,8,["model-value","items"])]),d("div",de,[o(F,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),d("div",me,[o(F,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),d("div",ue,[o(N,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),d("div",pe,[o(N,{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=e=>f.value=e),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])])]),d("div",ce,[o(T,{"prepend-icon":"tabler-rotate-clockwise",variant:"outlined",onClick:Y},{default:l(()=>t[12]||(t[12]=[u(" إعادة تعيين ")])),_:1,__:[12]})])]),_:1}),o(re),o(se,{"items-per-page":i.value,"onUpdate:itemsPerPage":t[6]||(t[6]=e=>i.value=e),"model-value":B.value,"onUpdate:modelValue":t[7]||(t[7]=e=>B.value=e),page:m.value,"onUpdate:page":t[8]||(t[8]=e=>m.value=e),items:q.value,"item-value":"id","items-length":C.value,headers:M,class:"text-no-wrap",loading:h.value,"onUpdate:options":I},{"item.user_name":l(({item:e})=>[e.user_id?(n(),_("a",{key:0,class:"text-primary cursor-pointer",onClick:z(S=>U(y).push(`/admin/users/${e.user_id}`),["prevent"])},g(e.user_name),9,ve)):(n(),_("span",fe,"-"))]),"item.folder_name":l(({item:e})=>[e.folder_id?(n(),_("a",{key:0,class:"text-primary cursor-pointer",onClick:z(S=>U(y).push(`/admin/folders/${e.folder_id}`),["prevent"])},g(e.folder_name),9,_e)):(n(),_("span",ge,"-"))]),"item.score_percentage":l(({item:e})=>[u(g(e.total_words?Math.round(e.correct_answers/e.total_words*100):0)+"% ",1)]),"item.created_at":l(({item:e})=>[u(g(R(e.created_at)),1)]),"item.actions":l(({item:e})=>[o(T,{variant:"outlined",size:"small",color:"primary",onClick:S=>U(y).push(`/admin/quizzes/${e.id}`)},{default:l(()=>t[13]||(t[13]=[u(" عرض النتيجة ")])),_:2,__:[13]},1032,["onClick"])]),bottom:l(()=>[o(G,{page:m.value,"onUpdate:page":t[5]||(t[5]=e=>m.value=e),"items-per-page":i.value,"total-items":C.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(oe,{modelValue:x.value,"onUpdate:modelValue":t[10]||(t[10]=e=>x.value=e),color:b.value,location:"top end",timeout:"5000"},{prepend:l(()=>[b.value==="success"?(n(),E($,{key:0,icon:"tabler-check"})):b.value==="error"?(n(),E($,{key:1,icon:"tabler-alert-circle"})):W("",!0)]),actions:l(()=>[o(T,{icon:"",variant:"text",color:"white",onClick:t[9]||(t[9]=e=>x.value=!1)},{default:l(()=>[o($,{icon:"tabler-x"})]),_:1})]),default:l(()=>[u(" "+g(A.value)+" ",1)]),_:1},8,["modelValue","color"])])}}};export{lt as default};
