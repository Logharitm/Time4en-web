import{_ as ue}from"./TablePagination-C1WLz1cL.js";import{_ as me}from"./AppDateTimePicker-cJ7QXFG-.js";import{_ as pe}from"./AppTextField-CQr3vq4q.js";import{_ as ce}from"./AppSelect-CIRU7Ono.js";import{r,E as ve,w as fe,V as _e,c as _,b as o,e as a,i as Ve,a as we,o as i,s,d,a0 as S,Z as V,t as m,$ as Q,l as Z,f as F,k as ye}from"./main-Hb8XIVRF.js";import ge from"./AddWordDrawer-ZfdJOUTK.js";import ke from"./EditWordDrawer-CePtRLz8.js";import{$ as W}from"./api-DWtqbNwL.js";import{V as j,a as be,b as q,d as xe}from"./VCard-DUPxC2WR.js";import{V as Ce}from"./VSnackbar-DH1nKyKW.js";import{V as Te}from"./VDialog-QpZlpaVm.js";import{V as H}from"./VCardText-1QTsimEb.js";import{V as $e}from"./VDivider-Cf4UjW41.js";import{V as De}from"./VDataTableServer-DXKB0CV-.js";import{V as Ue}from"./VSpacer-Dka27U5b.js";import"./VPagination-B9fsnExD.js";import"./VField-BozUaRwE.js";import"./form-2JaaAXdy.js";import"./easing-Bybner-F.js";import"./VInput-BM2109ea.js";import"./VImg-Dmr3grH1.js";import"./VTextField-ChuAGwZ0.js";/* empty css                   */import"./VCounter-ZugUu--r.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-C7b7isbb.js";import"./VList-Dte0qrhd.js";import"./ssrBoot-Df6PafXS.js";import"./VAvatar-CK_iinmj.js";import"./dialog-transition-CeIx901Q.js";import"./VMenu--fyt11cQ.js";import"./VOverlay-DtHbBEyo.js";import"./delay-BDFbLUOd.js";import"./lazy-CepgJUy9.js";import"./scopeId-D_kk_nLK.js";import"./VCheckboxBtn-R_tN2DCj.js";import"./VSelectionControl-Bz0xH2RZ.js";import"./VChip-BsLEiybA.js";import"./VSlideGroup-Gee6pLzD.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-ChHqonRz.js";import"./vue3-perfect-scrollbar-Bw9auKBj.js";import"./VNavigationDrawer-sMq-pydM.js";import"./VForm-BvmPyYG0.js";import"./VRow-CLyu3EGz.js";/* empty css              */import"./AppTextarea-ClsdnvHJ.js";import"./VTextarea-D7WmZ-jg.js";import"./index-CvOPxmL5.js";import"./VDataTable-iVgNRTwD.js";import"./VTable-D6ta-FFx.js";import"./filter-BfgzSra8.js";const Be={class:"d-flex flex-wrap gap-4"},Se={class:"me-3 d-flex gap-3"},We={style:{"min-width":"220px"}},Pe={style:{"min-width":"200px"}},Ae={style:{"min-width":"200px"}},he={style:{"min-width":"160px"}},Ee={style:{"min-width":"160px"}},Ie={class:"d-flex gap-3 mt-4"},Ne={key:1},Fe=["onClick"],Oe={key:1},Me=["onClick"],Re={key:1},zt={__name:"index",setup(Ye){const O=Ve(),w=r(""),y=r(""),g=r(""),k=r(""),b=r(""),u=r(10),p=r(1),P=r(),A=r(),M=r([]),J=l=>{var e,n;P.value=(e=l.sortBy[0])==null?void 0:e.key,A.value=(n=l.sortBy[0])==null?void 0:n.order},$=r(!1),R=r(""),D=r("success"),c=(l,e="success")=>{R.value=l,D.value=e,$.value=!0},x=r(!1),U=r(null),K=l=>{U.value=l,x.value=!0},X=async()=>{U.value&&(await ne(U.value),x.value=!1,U.value=null)},ee=[{title:"الكلمة",key:"word"},{title:"الترجمة",key:"translation"},{title:"الصوت",key:"audio",sortable:!1},{title:"المجلد",key:"folder_name"},{title:"المستخدم",key:"user_name"},{title:"تاريخ الإنشاء",key:"created_at"}],Y=r([]),h=r(0),E=r(!0),te=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",C=async()=>{var l;E.value=!0;try{const e={search:w.value||void 0,user_name:y.value||void 0,folder_name:g.value||void 0,created_from:k.value||void 0,created_to:b.value||void 0,per_page:u.value,page:p.value,sort_by:P.value,sort_order:A.value},n=await W("/words",{method:"GET",params:e});n.status==="success"&&(Y.value=n.data,h.value=((l=n.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching words",e)}finally{E.value=!1}},oe=()=>{w.value="",y.value="",g.value="",k.value="",b.value=""};ve(()=>{C()}),fe([w,y,g,k,b,u,p,P,A],C);const ae=_e(()=>Y.value),z=r(!1),B=r(!1),G=r(null),le=l=>{G.value=l,B.value=!0},re=async l=>{try{await W("/words",{method:"POST",body:l}),c("تم إضافة الكلمة بنجاح","success"),C()}catch{c("حدث خطأ، حاول مرة أخرى","error")}},se=async(l,e)=>{try{await W(`/words/${l}/update`,{method:"POST",body:e}),c("تم تعديل الكلمة بنجاح","success"),C()}catch{c("حدث خطأ، حاول مرة أخرى","error")}},ne=async l=>{try{await W(`/words/${l}/delete`,{method:"POST"}),c("تم حذف الكلمة بنجاح","success"),C()}catch{c("حدث خطأ أثناء الحذف","error")}},v=r(null),T=r(null),ie=l=>{if(l.audio_url)if(v.value&&(v.value.pause(),v.value.currentTime=0),T.value===l.id)T.value=null,v.value=null;else{const e=new Audio(l.audio_url);v.value=e,T.value=l.id,e.play(),e.onended=()=>{T.value=null,v.value=null}}};return(l,e)=>{const n=ce,I=pe,L=me,N=we("IconBtn"),de=ue;return i(),_("section",null,[o(j,{class:"mb-6"},{default:a(()=>[o(be,{class:"pb-4"},{default:a(()=>[o(q,null,{default:a(()=>e[17]||(e[17]=[s("الكلمات")])),_:1,__:[17]})]),_:1}),o(H,{class:"d-flex flex-wrap gap-4 align-center"},{default:a(()=>[d("div",Be,[d("div",Se,[o(n,{label:"عرض","model-value":u.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=parseInt(t,10))},null,8,["model-value","items"])]),d("div",We,[o(I,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=t=>w.value=t),placeholder:"بحث بالكلمة أو الترجمة",label:"بحث بالكلمة أو الترجمة"},null,8,["modelValue"])]),d("div",Pe,[o(I,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=t=>y.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),d("div",Ae,[o(I,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),d("div",he,[o(L,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),d("div",Ee,[o(L,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=t=>b.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])])]),d("div",Ie,[o(S,{"prepend-icon":"tabler-rotate-clockwise",onClick:oe,variant:"outlined"},{default:a(()=>e[18]||(e[18]=[s("إعادة تعيين")])),_:1,__:[18]})])]),_:1}),o($e),o(De,{"items-per-page":u.value,"onUpdate:itemsPerPage":e[7]||(e[7]=t=>u.value=t),"model-value":M.value,"onUpdate:modelValue":e[8]||(e[8]=t=>M.value=t),page:p.value,"onUpdate:page":e[9]||(e[9]=t=>p.value=t),items:ae.value,"item-value":"id","items-length":h.value,headers:ee,class:"text-no-wrap",loading:E.value,"onUpdate:options":J},{"item.word":a(({item:t})=>[s(m(t.word),1)]),"item.translation":a(({item:t})=>[s(m(t.translation),1)]),"item.example_sentence":a(({item:t})=>[s(m(t.example_sentence),1)]),"item.audio":a(({item:t})=>[t.audio_url?(i(),F(N,{key:0,onClick:f=>ie(t),title:"تشغيل/إيقاف"},{default:a(()=>[o(V,{icon:T.value===t.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])):(i(),_("span",Ne,"-"))]),"item.folder_name":a(({item:t})=>[t.folder_id?(i(),_("a",{key:0,onClick:Q(f=>Z(O).push(`/admin/folders/${t.folder_id}`),["prevent"]),class:"text-primary cursor-pointer"},m(t.folder_name),9,Fe)):(i(),_("span",Oe,"-"))]),"item.user_name":a(({item:t})=>[t.user_id?(i(),_("a",{key:0,onClick:Q(f=>Z(O).push(`/admin/users/${t.user_id}`),["prevent"]),class:"text-primary cursor-pointer"},m(t.user_name),9,Me)):(i(),_("span",Re,"-"))]),"item.created_at":a(({item:t})=>[s(m(te(t.created_at)),1)]),"item.actions":a(({item:t})=>[o(N,{onClick:f=>le(t)},{default:a(()=>[o(V,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),o(N,{onClick:f=>K(t.id)},{default:a(()=>[o(V,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:a(()=>[o(de,{page:p.value,"onUpdate:page":e[6]||(e[6]=t=>p.value=t),"items-per-page":u.value,"total-items":h.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(ge,{"is-drawer-open":z.value,"onUpdate:isDrawerOpen":e[10]||(e[10]=t=>z.value=t),onWordData:re},null,8,["is-drawer-open"]),o(ke,{"is-drawer-open":B.value,"onUpdate:isDrawerOpen":e[11]||(e[11]=t=>B.value=t),"word-data":G.value,onSubmitWord:e[12]||(e[12]=async(t,f)=>{try{await se(t,f),B.value=!1}catch{}})},null,8,["is-drawer-open","word-data"]),o(Ce,{modelValue:$.value,"onUpdate:modelValue":e[14]||(e[14]=t=>$.value=t),color:D.value,location:"top end",timeout:"5000"},{prepend:a(()=>[D.value==="success"?(i(),F(V,{key:0,icon:"tabler-check"})):D.value==="error"?(i(),F(V,{key:1,icon:"tabler-alert-circle"})):ye("",!0)]),actions:a(()=>[o(S,{icon:"",variant:"text",color:"white",onClick:e[13]||(e[13]=t=>$.value=!1)},{default:a(()=>[o(V,{icon:"tabler-x"})]),_:1})]),default:a(()=>[s(" "+m(R.value)+" ",1)]),_:1},8,["modelValue","color"]),o(Te,{modelValue:x.value,"onUpdate:modelValue":e[16]||(e[16]=t=>x.value=t),"max-width":"500px"},{default:a(()=>[o(j,null,{default:a(()=>[o(q,{class:"text-h6"},{default:a(()=>e[19]||(e[19]=[s("تأكيد الحذف")])),_:1,__:[19]}),o(H,null,{default:a(()=>e[20]||(e[20]=[s("هل أنت متأكد أنك تريد حذف هذه الكلمة؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[20]}),o(xe,{class:"px-6 pb-4"},{default:a(()=>[o(Ue),o(S,{color:"error",variant:"flat",onClick:e[15]||(e[15]=t=>x.value=!1)},{default:a(()=>e[21]||(e[21]=[s("إلغاء")])),_:1,__:[21]}),o(S,{color:"success",variant:"flat",onClick:X},{default:a(()=>e[22]||(e[22]=[s("موافق")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{zt as default};
