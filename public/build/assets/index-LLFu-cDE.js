import{_ as re}from"./TablePagination-FEoMt-5H.js";import{_ as ne}from"./AppTextField-1v8EtKwG.js";import{_ as ie}from"./AppSelect-BnoP6lJv.js";import ue from"./AddNewFAQDrawer-DgmgYQzj.js";import pe from"./EditFAQDrawer-DFVn5CRN.js";import{$ as k}from"./api-BWXiQTAe.js";import{V as B,a as me,b as E,d as Z}from"./VCard-BwNB_HAq.js";import{V as de}from"./VSnackbar-BWUYaC0M.js";import{V as H}from"./VDialog-BUnpObim.js";import{V as N}from"./VCardText-UmcD3uX4.js";import{V as P}from"./VSpacer-CTjEbtYZ.js";import{r as s,E as ve,w as fe,V as ce,c as Ve,b as t,e as o,a as we,o as x,s as r,d as n,ae as A,Z as d,t as u,f as S}from"./main-CfNsrW5X.js";import{V as J}from"./VDivider-D6cLcLYm.js";import{V as ge}from"./VDataTableServer-DwftUa6d.js";import"./VPagination-Cir5u0uG.js";import"./form-Dho8Ouqi.js";import"./VTextField-H4qGtiT3.js";/* empty css                   */import"./VCounter-DPVeqQ4H.js";import"./VImg-tZlraYhF.js";import"./VField-v42BI7p0.js";import"./easing-Bybner-F.js";import"./VInput-DQO5F0Vq.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-BZuayceH.js";import"./VList-DPGqeTjD.js";import"./ssrBoot-DmFgaC2p.js";import"./VAvatar-Dc7XDQH2.js";import"./dialog-transition-wevARXMR.js";import"./VMenu-CJGRcl1l.js";import"./VOverlay-CF5OZ2zX.js";import"./delay-bGRiBgiz.js";import"./lazy-BIRj0o29.js";import"./scopeId-DkOV9qZL.js";import"./VCheckboxBtn-XnaBXv5q.js";import"./VSelectionControl-BXtfCnk7.js";import"./VChip-zKdVk-YJ.js";import"./VSlideGroup-CZ0iXbBO.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-GyL0AwsL.js";import"./vue3-perfect-scrollbar-DWkZM5c9.js";import"./VNavigationDrawer-Cnwz6J30.js";import"./VForm-ByAkZWzG.js";import"./VRow-D9bkbwLr.js";/* empty css              */import"./index-CvOPxmL5.js";import"./VDataTable-DAyQ69-e.js";import"./VTable-CGp7hVZP.js";import"./filter-BMupVczl.js";const ye={class:"me-3 d-flex gap-3"},_e={class:"d-flex align-center flex-wrap gap-4"},be={style:{"inline-size":"15.625rem"}},yt={__name:"index",setup(ke){const g=s(""),i=s(10),p=s(1),C=s(),D=s(),I=s([]),K=l=>{var e,V;C.value=(e=l.sortBy[0])==null?void 0:e.key,D.value=(V=l.sortBy[0])==null?void 0:V.order},q=s(!1),O=s(""),y=s("success"),m=(l,e="success")=>{O.value=l,y.value=e,q.value=!0},v=s(!1),_=s(null),L=l=>{_.value=l,v.value=!0},W=async()=>{_.value&&(await te(_.value),v.value=!1,_.value=null)},b=s(!1),f=s(null),X=l=>{f.value=l,b.value=!0},Y=[{title:"السؤال (AR)",key:"question"},{title:"الإجابة (AR)",key:"answer"},{title:"Question (EN)",key:"question_en"},{title:"Answer (EN)",key:"answer_en"},{title:"العمليات",key:"actions",sortable:!1}],R=s([]),T=s(0),$=s(!0),c=async()=>{$.value=!0;try{const l=await k("/faqs",{method:"GET",params:{search:g.value,per_page:i.value,page:p.value,sort_by:C.value,sort_order:D.value}});l.status==="success"&&(R.value=l.data.data,T.value=l.data.total)}catch(l){console.error("Error fetching FAQs",l)}finally{$.value=!1}};ve(c),fe([g,i,p,C,D],c);const h=ce(()=>R.value),F=s(!1),Q=s(!1),z=s(null),ee=async l=>{try{await k("/faqs",{method:"POST",body:l}),m("تم إضافة السؤال بنجاح","success"),c()}catch{m("حدث خطأ أثناء الإضافة","error")}},te=async l=>{try{await k(`/faqs/${l}/delete`,{method:"POST"}),m("تم الحذف بنجاح","success"),c()}catch{m("حدث خطأ أثناء الحذف","error")}},ae=l=>{z.value=l,Q.value=!0},le=async(l,e)=>{try{await k(`/faqs/${l}`,{method:"POST",body:e}),m("تم تعديل السؤال بنجاح","success"),c()}catch{m("حدث خطأ أثناء التعديل","error")}},j=l=>{if(!l)return"";const e=l.split(" ");return e.length>5?e.slice(0,5).join(" ")+"...":l};return(l,e)=>{const V=ie,oe=ne,U=we("IconBtn"),se=re;return x(),Ve("section",null,[t(B,{class:"mb-6"},{default:o(()=>[t(me,{class:"pb-4"},{default:o(()=>[t(E,null,{default:o(()=>e[14]||(e[14]=[r("اسألة واجوبة")])),_:1,__:[14]})]),_:1}),t(N,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[n("div",ye,[t(V,{"model-value":i.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=parseInt(a,10))},null,8,["model-value"])]),t(P),n("div",_e,[n("div",be,[t(oe,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),placeholder:"بحث"},null,8,["modelValue"])]),t(A,{"prepend-icon":"tabler-plus",onClick:e[2]||(e[2]=a=>F.value=!0)},{default:o(()=>e[15]||(e[15]=[r(" إضافة سؤال جديد ")])),_:1,__:[15]})])]),_:1}),t(J),t(ge,{"items-per-page":i.value,"onUpdate:itemsPerPage":e[4]||(e[4]=a=>i.value=a),"model-value":I.value,"onUpdate:modelValue":e[5]||(e[5]=a=>I.value=a),page:p.value,"onUpdate:page":e[6]||(e[6]=a=>p.value=a),items:h.value,"item-value":"id","items-length":T.value,headers:Y,class:"text-no-wrap",loading:$.value,"onUpdate:options":K},{"item.answer":o(({item:a})=>[r(u(j(a.answer)),1)]),"item.answer_en":o(({item:a})=>[r(u(j(a.answer_en)),1)]),"item.actions":o(({item:a})=>[t(U,{onClick:w=>X(a)},{default:o(()=>[t(d,{icon:"tabler-eye"})]),_:2},1032,["onClick"]),t(U,{onClick:w=>ae(a)},{default:o(()=>[t(d,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),t(U,{onClick:w=>L(a.id)},{default:o(()=>[t(d,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:o(()=>[t(se,{page:p.value,"onUpdate:page":e[3]||(e[3]=a=>p.value=a),"items-per-page":i.value,"total-items":T.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),t(ue,{"is-drawer-open":F.value,"onUpdate:isDrawerOpen":e[7]||(e[7]=a=>F.value=a),onFaqData:ee},null,8,["is-drawer-open"]),t(pe,{"is-drawer-open":Q.value,"onUpdate:isDrawerOpen":e[8]||(e[8]=a=>Q.value=a),"faq-data":z.value,onFaqData:le},null,8,["is-drawer-open","faq-data"]),t(de,{modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=a=>q.value=a),color:y.value,location:"top end",timeout:"5000"},{prepend:o(()=>[y.value==="success"?(x(),S(d,{key:0,icon:"tabler-check"})):y.value==="error"?(x(),S(d,{key:1,icon:"tabler-alert-circle"})):(x(),S(d,{key:2,icon:"tabler-info-circle"}))]),default:o(()=>[r(" "+u(O.value),1)]),_:1},8,["modelValue","color"]),t(H,{modelValue:v.value,"onUpdate:modelValue":e[11]||(e[11]=a=>v.value=a),"max-width":"500px"},{default:o(()=>[t(B,null,{default:o(()=>[t(E,{class:"text-h6"},{default:o(()=>e[16]||(e[16]=[r("تأكيد الحذف")])),_:1,__:[16]}),t(N,null,{default:o(()=>e[17]||(e[17]=[r("هل أنت متأكد أنك تريد حذف هذا السؤال؟")])),_:1,__:[17]}),t(Z,{class:"px-6 pb-4"},{default:o(()=>[t(P),t(A,{color:"error",variant:"flat",onClick:e[10]||(e[10]=a=>v.value=!1)},{default:o(()=>e[18]||(e[18]=[r(" إلغاء ")])),_:1,__:[18]}),t(A,{color:"success",variant:"flat",onClick:W},{default:o(()=>e[19]||(e[19]=[r(" موافق ")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(H,{modelValue:b.value,"onUpdate:modelValue":e[13]||(e[13]=a=>b.value=a),"max-width":"700px"},{default:o(()=>[t(B,null,{default:o(()=>[t(E,{class:"text-h6"},{default:o(()=>e[20]||(e[20]=[r("عرض السؤال والإجابة")])),_:1,__:[20]}),t(N,null,{default:o(()=>{var a,w,G,M;return[n("p",null,[e[21]||(e[21]=n("strong",null,"السؤال (AR):",-1)),r(" "+u((a=f.value)==null?void 0:a.question),1)]),n("p",null,[e[22]||(e[22]=n("strong",null,"الإجابة (AR):",-1)),r(" "+u((w=f.value)==null?void 0:w.answer),1)]),t(J,{class:"my-2"}),n("p",null,[e[23]||(e[23]=n("strong",null,"Question (EN):",-1)),r(" "+u((G=f.value)==null?void 0:G.question_en),1)]),n("p",null,[e[24]||(e[24]=n("strong",null,"Answer (EN):",-1)),r(" "+u((M=f.value)==null?void 0:M.answer_en),1)])]}),_:1}),t(Z,{class:"px-6 pb-4"},{default:o(()=>[t(P),t(A,{color:"primary",variant:"flat",onClick:e[12]||(e[12]=a=>b.value=!1)},{default:o(()=>e[25]||(e[25]=[r("إغلاق")])),_:1,__:[25]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{yt as default};
