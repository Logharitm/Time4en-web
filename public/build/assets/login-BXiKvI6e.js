import{r as h,e as F}from"./validators-DpYrMFzk.js";import{r as p,u as P,i as A,a as B,c as E,o as M,b as a,e as s,d as o,l as t,G as g,t as v,s as l,a_ as N,aU as S,af as $,F as j,b4 as _,aZ as U}from"./main-BZIVN5Zq.js";import{_ as G}from"./AppTextField-CcJ3EcPY.js";import{_ as z}from"./AuthProvider-D4fiGs23.js";import{u as x}from"./useGenerateImageVariant-DA5Xe20t.js";import{a as O,b as W,c as Z,d as H}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{a as J,b as K}from"./misc-mask-light-Ha4lQOdV.js";import{V as Q}from"./VNodeRenderer-BeJboMVZ.js";import{u as X}from"./useAbility-C5mmwxqf.js";import{$ as Y}from"./api-BMXaHw8G.js";import{a as n,V as k}from"./VRow-DM-XlE0M.js";import{V as ee}from"./VImg-Ba81qkxC.js";import{V as ae}from"./VCard-BbZonHpJ.js";import{V as b}from"./VCardText-B4vw7bo-.js";import{V as te}from"./VAlert-BeGqrm6e.js";import{V as se}from"./VForm-MB1jVWVb.js";import{V as oe}from"./VCheckbox-B-GXiSgu.js";import{V as C}from"./VDivider-CPoqCHay.js";import"./helpers-DK5QwNv0.js";import"./form-DTb44Ioi.js";import"./VTextField-CjlCeKU3.js";/* empty css                   */import"./VCounter-Bav9CRzz.js";import"./VField-CXsDmSTJ.js";import"./easing-Bybner-F.js";import"./VInput-hstW1gC2.js";import"./forwardRefs-C-GTDzx5.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-DYXDNg4L.js";import"./VCheckboxBtn-CqvrbZ74.js";import"./VSelectionControl-D3clWX2D.js";const re={class:"auth-logo d-flex align-center gap-x-3"},le={class:"auth-title"},ie={class:"position-relative bg-background w-100 me-0"},ne={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},me=["src"],de={class:"text-h4 mb-1"},ue={class:"text-capitalize"},pe={class:"d-flex align-center flex-wrap justify-space-between my-6"},We={__name:"login",setup(fe){const R=x(H,Z,W,O,!0),L=x(K,J),f=p(!1),w=P(),T=A(),I=X(),c=p({email:void 0,password:void 0}),y=p(),m=p({email:"admin@demo.com",password:"admin"}),V=p(!1),q=async()=>{try{const r=await Y("/auth/login",{method:"POST",body:{email:m.value.email,password:m.value.password},onResponseError({response:i}){c.value=i._data.errors}}),{accessToken:e,userData:d,userAbilityRules:u}=r;_("userAbilityRules").value=u,I.update(u),_("userData").value=d,_("accessToken").value=e,await U(()=>{T.replace(w.query.to?String(w.query.to):"/")})}catch(r){console.error(r)}},D=()=>{var r;(r=y.value)==null||r.validate().then(({valid:e})=>{e&&q()})};return(r,e)=>{const d=B("RouterLink"),u=G;return M(),E(j,null,[a(d,{to:"/"},{default:s(()=>[o("div",re,[a(t(Q),{nodes:t(g).app.logo},null,8,["nodes"]),o("h1",le,v(t(g).app.title),1)])]),_:1}),a(k,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:s(()=>[a(n,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[o("div",ie,[o("div",ne,[a(ee,{"max-width":"613",src:t(R),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),o("img",{class:"auth-footer-mask",src:t(L),alt:"auth-footer-mask",height:"280",width:"100"},null,8,me)])]),_:1}),a(n,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:s(()=>[a(ae,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[a(b,null,{default:s(()=>[o("h4",de,[e[4]||(e[4]=l(" Welcome to ")),o("span",ue,v(t(g).app.title),1),e[5]||(e[5]=l("! 👋🏻 "))]),e[6]||(e[6]=o("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1))]),_:1,__:[6]}),a(b,null,{default:s(()=>[a(te,{color:"primary",variant:"tonal"},{default:s(()=>e[7]||(e[7]=[o("p",{class:"text-sm mb-2"},[l(" Admin Email: "),o("strong",null,"admin@demo.com"),l(" / Pass: "),o("strong",null,"admin")],-1),o("p",{class:"text-sm mb-0"},[l(" Client Email: "),o("strong",null,"client@demo.com"),l(" / Pass: "),o("strong",null,"client")],-1)])),_:1,__:[7]})]),_:1}),a(b,null,{default:s(()=>[a(t(se),{ref_key:"refVForm",ref:y,onSubmit:N(D,["prevent"])},{default:s(()=>[a(k,null,{default:s(()=>[a(n,{cols:"12"},{default:s(()=>[a(u,{modelValue:t(m).email,"onUpdate:modelValue":e[0]||(e[0]=i=>t(m).email=i),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in r?r.requiredValidator:t(h),"emailValidator"in r?r.emailValidator:t(F)],"error-messages":t(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12"},{default:s(()=>[a(u,{modelValue:t(m).password,"onUpdate:modelValue":e[1]||(e[1]=i=>t(m).password=i),label:"Password",placeholder:"············",rules:["requiredValidator"in r?r.requiredValidator:t(h)],type:t(f)?"text":"password",autocomplete:"password","error-messages":t(c).password,"append-inner-icon":t(f)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=i=>f.value=!t(f))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),o("div",pe,[a(oe,{modelValue:t(V),"onUpdate:modelValue":e[3]||(e[3]=i=>S(V)?V.value=i:null),label:"Remember me"},null,8,["modelValue"]),a(d,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>e[8]||(e[8]=[l(" Forgot Password? ")])),_:1,__:[8]})]),a($,{block:"",type:"submit"},{default:s(()=>e[9]||(e[9]=[l(" Login ")])),_:1,__:[9]})]),_:1}),a(n,{cols:"12",class:"text-center"},{default:s(()=>[e[11]||(e[11]=o("span",null,"New on our platform?",-1)),a(d,{class:"text-primary ms-1",to:{name:"register"}},{default:s(()=>e[10]||(e[10]=[l(" Create an account ")])),_:1,__:[10]})]),_:1,__:[11]}),a(n,{cols:"12",class:"d-flex align-center"},{default:s(()=>[a(C),e[12]||(e[12]=o("span",{class:"mx-4"},"or",-1)),a(C)]),_:1,__:[12]}),a(n,{cols:"12",class:"text-center"},{default:s(()=>[a(z)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{We as default};
