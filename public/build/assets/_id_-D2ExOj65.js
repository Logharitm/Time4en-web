import{N as Y,F as ee}from"./front-page-navbar-vv6bsNH-.js";import te from"./AddWordDrawer-N46LQjnH.js";import ae from"./EditWordDrawer-aCn-HkiV.js";import{_ as oe,u as le,r,aA as re,cx as se,V as ne,E as ie,a as ue,c as h,o as n,b as a,e as l,f as v,k as w,s as i,Z as d,t as s,d as c,a5 as p,F as ce,h as de,l as pe}from"./main-DkHUohfz.js";import{$ as V}from"./api-DcjYb6k9.js";import{V as me}from"./VBreadcrumbs-Dhuu4ExT.js";import{a as x,V as fe}from"./VRow-CvCjzyNv.js";import{V as z}from"./VContainer-D0F6uuF4.js";import{V as L,b as ve,d as _e}from"./VCard-BO7cdyWi.js";import{V as B}from"./VCardText-ewn7QRy2.js";import{V as ye}from"./VPagination-DUxyvkA8.js";import{V as ge}from"./VSpacer-CLE6WGjr.js";import{V as he}from"./VDialog-CGXgBRcX.js";import{V as we}from"./VSnackbar-C9EqtrVm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue3-perfect-scrollbar-DBdIOTUJ.js";import"./VNodeRenderer-BDgyswyn.js";import"./NavBarNotifications-CfOtjjKz.js";/* empty css                                                      */import"./VBadge-DUHngDC8.js";import"./VImg-CIsbjPWQ.js";import"./VMenu-BvgQFJ2w.js";import"./VOverlay-dRSK6Qqf.js";import"./easing-Bybner-F.js";import"./delay-At14RQ_F.js";import"./lazy-bALAG4uQ.js";import"./scopeId-CaFUMQRq.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-_zwXmBAn.js";import"./VChip-BvBQCyvI.js";import"./VSlideGroup-BaME61cx.js";import"./VAvatar-DWb-s-cK.js";import"./VDivider-XQ4aiAwn.js";import"./VList-acAuxmTw.js";import"./ssrBoot-q9WpVuPP.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VNavigationDrawer-D5rJ7OeP.js";import"./VToolbar-Dgj_WcWt.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppTextField-CxmgMODv.js";import"./form-DimEy9LF.js";import"./VTextField-Dp2waiXG.js";/* empty css                   */import"./VCounter-DQOtzq_2.js";import"./VField-cvuGxSYR.js";import"./VInput-Bv-ygOUX.js";import"./AppSelect-RZSessQl.js";import"./VSelect-YKx33Fr_.js";import"./VCheckboxBtn-DZUKEpTp.js";import"./VSelectionControl-rh255UKz.js";import"./AppDrawerHeaderSection-CNQfkJnW.js";import"./VForm-BN0bwct2.js";const Ve={class:"landing-page-wrapper"},ke={key:1,class:"d-flex align-center"},be={id:"words"},$e={class:"d-flex justify-space-between align-center mb-6"},xe={class:"text-h4"},Ce={class:"main-word-box d-flex align-center justify-space-between"},Se={class:"translation-en"},Te={class:"example-box d-flex align-center justify-space-between",style:{direction:"ltr"}},De={class:"sentence"},Ee={class:"v-row",style:{padding:"10px"}},Ue={key:0,class:"text-center py-6"},We={key:1,class:"d-flex justify-center my-6"},Nt={__name:"[id]",setup(Ae){const R=oe(),C=le(),G=r(),N=r([]),_=r(!1),O=r(""),m=r(1),P=r(20),S=r(1),T=r(!1),D=r(!1),F=r(null),y=r(!1),k=r(null),u=r(null),f=r(null),b=r(!1),I=r(""),$=r("success"),E=(t,e="success")=>{I.value=t,$.value=e,b.value=!0},g=async(t=1)=>{_.value=!0;try{const e=await V(`/words?folder_id=${C.params.id}&page=${t}&per_page=${P.value}`,{method:"GET"});e.status==="success"&&e.data&&(N.value=e.data||[],e.meta&&(m.value=e.meta.current_page,P.value=e.meta.per_page,S.value=e.meta.last_page))}catch(e){console.error("Error fetching words",e)}finally{_.value=!1}},M=async()=>{try{const t=await V(`/folders/${C.params.id}`,{method:"GET"});t.status==="success"&&t.data&&(O.value=t.data.name)}catch(t){console.error("Error fetching folder",t)}finally{_.value=!1}},Z=async t=>{try{const e=await V("/words",{method:"POST",body:t});if(e.status==="error"){E(e.message||$t("حدث خطأ أثناء إضافة الكلمة"),"error");return}g(m.value),E($t("تم إضافة الكلمة بنجاح"),"success")}catch{E($t("حدث خطأ غير متوقع"),"error")}},q=async(t,e)=>{try{await V(`/words/${t}/update`,{method:"POST",body:e}),g(m.value)}catch(W){console.error("Error editing word",W)}},H=t=>{k.value=t,y.value=!0},J=async()=>{if(k.value)try{await V(`/words/${k.value}/delete`,{method:"POST"}),g(m.value)}catch(t){console.error("Error deleting word",t)}finally{y.value=!1,k.value=null}},K=t=>{if(u.value&&(u.value.pause(),u.value.currentTime=0,u.value=null),f.value===t.id){f.value=null;return}if(f.value=t.id,t.audio_url&&t.audio_url!=="null"){const e=new Audio(t.audio_url);u.value=e,e.play(),e.onended=()=>{f.value=null,u.value=null},e.onerror=()=>{u.value=null,j(t.word)}}else j(t.word)};function j(t){if(!t)return;const e=new SpeechSynthesisUtterance(t);e.lang="en-US",e.rate=1,e.pitch=1,speechSynthesis.cancel(),speechSynthesis.speak(e),e.onend=()=>{f.value=null}}function Q(t){if(!t)return;const e=new SpeechSynthesisUtterance(t);e.lang="en-US",speechSynthesis.cancel(),speechSynthesis.speak(e)}re(()=>{u.value&&(u.value.pause(),u.value=null),speechSynthesis.cancel()});const{t:U}=se(),X=ne(()=>[{text:U("home"),to:"/",icon:"tabler-home"},{text:U("folders"),to:"/folders",icon:"tabler-folders"},{text:O.value||"...",to:null},{text:U("words"),to:null}]);return R.skin="default",ie(()=>{M(),g(m.value)}),(t,e)=>{const W=ue("RouterLink");return n(),h("div",Ve,[a(Y,{"active-id":G.value},null,8,["active-id"]),a(z,{class:"page-content-wrapper",style:{"margin-top":"140px !important"}},{default:l(()=>[a(me,{items:X.value,divider:">"},{item:l(({item:o})=>[o.to?(n(),v(W,{key:0,to:o.to,class:"d-flex align-center"},{default:l(()=>[o.icon?(n(),v(d,{key:0,icon:o.icon,size:"18",class:"mr-1"},null,8,["icon"])):w("",!0),i(" "+s(o.text),1)]),_:2},1032,["to"])):(n(),h("span",ke,[o.icon?(n(),v(d,{key:0,icon:o.icon,size:"18",class:"mr-1"},null,8,["icon"])):w("",!0),i(" "+s(o.text),1)]))]),_:1},8,["items"]),a(x,{cols:"12"},{default:l(()=>[c("div",be,[a(z,null,{default:l(()=>[c("div",$e,[c("h4",xe,s(t.$t("Words")),1),a(p,{color:"primary",onClick:e[0]||(e[0]=o=>T.value=!0)},{default:l(()=>[a(d,{class:"tabler-plus ml-2"}),i(" "+s(t.$t("Add Word")),1)]),_:1})]),a(fe,null,{default:l(()=>[(n(!0),h(ce,null,de(N.value,o=>(n(),v(x,{key:o.id,cols:"12",sm:"6",lg:"4"},{default:l(()=>[a(L,{class:"word-card"},{default:l(()=>[c("div",Ce,[c("span",null,s(o.word),1),a(p,{icon:"",size:"small",color:"white",variant:"text",class:"play-btn",onClick:A=>K(o)},{default:l(()=>[a(d,{icon:f.value===o.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])]),a(B,null,{default:l(()=>[c("p",Se,[i(s(t.$t("Translation"))+": ",1),c("b",null,s(o.translation||"-"),1)])]),_:2},1024),a(B,null,{default:l(()=>[c("div",Te,[c("span",De,s(o.example_sentence||"-"),1),a(p,{icon:"",color:"primary",size:"small",onClick:A=>Q(o.example_sentence)},{default:l(()=>[a(d,{icon:"tabler-volume"})]),_:2},1032,["onClick"])])]),_:2},1024),c("div",Ee,[a(x,null,{default:l(()=>[a(p,{color:"primary",variant:"outlined",block:"",onClick:A=>(F.value=o,D.value=!0)},{default:l(()=>[i(s(t.$t("Edit")),1)]),_:2},1032,["onClick"])]),_:2},1024),a(x,null,{default:l(()=>[a(p,{color:"primary",variant:"outlined",block:"",onClick:A=>H(o.id)},{default:l(()=>[i(s(t.$t("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),_.value?(n(),h("div",Ue,s(t.$t("Loading"))+"... ",1)):w("",!0),!_.value&&S.value>1?(n(),h("div",We,[a(ye,{modelValue:m.value,"onUpdate:modelValue":[e[1]||(e[1]=o=>m.value=o),g],length:S.value,"total-visible":"7"},null,8,["modelValue","length"])])):w("",!0)]),_:1})])]),_:1})]),_:1}),a(ee),a(te,{"is-drawer-open":T.value,"onUpdate:isDrawerOpen":e[2]||(e[2]=o=>T.value=o),"folder-id":pe(C).params.id,onWordData:Z},null,8,["is-drawer-open","folder-id"]),a(ae,{"is-drawer-open":D.value,"onUpdate:isDrawerOpen":e[3]||(e[3]=o=>D.value=o),"word-data":F.value,onSubmitWord:q},null,8,["is-drawer-open","word-data"]),a(he,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=o=>y.value=o),"max-width":"500px"},{default:l(()=>[a(L,null,{default:l(()=>[a(ve,{class:"text-h6"},{default:l(()=>[i(s(t.$t("confirm delete")),1)]),_:1}),a(B,null,{default:l(()=>[i(s(t.$t("confirm_message")),1)]),_:1}),a(_e,{class:"px-6 pb-4"},{default:l(()=>[a(ge),a(p,{color:"error",variant:"flat",onClick:e[4]||(e[4]=o=>y.value=!1)},{default:l(()=>[i(s(t.$t("cancel")),1)]),_:1}),a(p,{color:"success",variant:"flat",onClick:J},{default:l(()=>[i(s(t.$t("confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(we,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),color:$.value,location:"top end",timeout:"5000"},{prepend:l(()=>[$.value==="success"?(n(),v(d,{key:0,icon:"tabler-check"})):$.value==="error"?(n(),v(d,{key:1,icon:"tabler-alert-circle"})):w("",!0)]),actions:l(()=>[a(p,{icon:"",variant:"text",color:"white",onClick:e[6]||(e[6]=o=>b.value=!1)},{default:l(()=>[a(d,{icon:"tabler-x"})]),_:1})]),default:l(()=>[i(" "+s(I.value)+" ",1)]),_:1},8,["modelValue","color"])])}}};export{Nt as default};
