import{_ as ue}from"./TablePagination-CwuW6oLx.js";import{_ as me}from"./AppDateTimePicker-BBeFrAfo.js";import{_ as pe}from"./AppTextField-D5JVTNYL.js";import{_ as ve}from"./AppSelect-ChR6kCPv.js";import{r,E as ce,w as fe,V as _e,c as _,b as o,e as a,i as ye,a as Ve,o as i,s,d,ae as $,Z as y,t as m,a_ as Q,l as Z,f as h,k as we}from"./main-CJ3s8d7p.js";import ge from"./AddWordDrawer-BxLG2_XM.js";import ke from"./EditWordDrawer-CXF76ta0.js";import{$ as W}from"./api-DC_uCCna.js";import{V as j,a as be,b as q,d as xe}from"./VCard-DOiW70Vn.js";import{V as Ce}from"./VSnackbar-Dfdl6Cm3.js";import{V as Te}from"./VDialog-8F8JiHqd.js";import{V as H}from"./VCardText-VHBTSHxW.js";import{V as $e}from"./VDivider-6_WzVrhj.js";import{V as De}from"./VDataTableServer-Dx-MrhJT.js";import{V as Ue}from"./VSpacer-57lhe_Vn.js";import"./VPagination-BqP8euJl.js";import"./VField-CSF1ftV9.js";import"./form-BS4iypQI.js";import"./easing-Bybner-F.js";import"./VInput-FsqI7dxe.js";import"./VImg-VQEWjuKh.js";import"./VTextField-D7BXsvve.js";/* empty css                   */import"./VCounter-GzLg6Py-.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CG0RJ4O2.js";import"./VList-DBVDGbkr.js";import"./ssrBoot-S-Kq7Yf9.js";import"./VAvatar-DssCabF4.js";import"./dialog-transition-jVyD8jel.js";import"./VMenu-EgL2IrIQ.js";import"./VOverlay-Cl41DukG.js";import"./delay-BpzKQecu.js";import"./lazy-BIm1Mkg3.js";import"./scopeId-B6ii09tX.js";import"./VCheckboxBtn-BxcksGmC.js";import"./VSelectionControl-b_OFBKOh.js";import"./VChip-BAFqNygk.js";import"./VSlideGroup-DjE7apdW.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-BLEzC_vj.js";import"./vue3-perfect-scrollbar-Dsv-Zo_X.js";import"./VNavigationDrawer-VfMbFvPs.js";import"./VForm-CW34HnJ4.js";import"./VRow-9iT1RU60.js";/* empty css              */import"./AppTextarea-NKqgP66u.js";import"./VTextarea-DOcU--ga.js";import"./index-CvOPxmL5.js";import"./VDataTable-DMwGSS5p.js";import"./VTable-INudgHX2.js";import"./filter-DHDBAYKc.js";const Be={class:"d-flex flex-wrap gap-4"},Se={class:"me-3 d-flex gap-3"},We={style:{"min-width":"220px"}},Pe={style:{"min-width":"200px"}},Ae={style:{"min-width":"200px"}},Ee={style:{"min-width":"160px"}},Ie={style:{"min-width":"160px"}},Ne={class:"d-flex gap-3 mt-4"},Fe={key:1},Oe=["onClick"],he={key:1},Me=["onClick"],Re={key:1},zt={__name:"index",setup(Ye){const M=ye(),V=r(""),w=r(""),g=r(""),k=r(""),b=r(""),u=r(10),p=r(1),P=r(),A=r(),R=r([]),J=l=>{var e,n;P.value=(e=l.sortBy[0])==null?void 0:e.key,A.value=(n=l.sortBy[0])==null?void 0:n.order},D=r(!1),Y=r(""),U=r("success"),v=(l,e="success")=>{Y.value=l,U.value=e,D.value=!0},x=r(!1),B=r(null),K=l=>{B.value=l,x.value=!0},X=async()=>{B.value&&(await ne(B.value),x.value=!1,B.value=null)},ee=[{title:"الكلمة",key:"word"},{title:"الترجمة",key:"translation"},{title:"الجملة",key:"example_sentence"},{title:"الصوت",key:"audio",sortable:!1},{title:"المجلد",key:"folder_name"},{title:"المستخدم",key:"user_name"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"العمليات",key:"actions",sortable:!1}],z=r([]),E=r(0),I=r(!0),te=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",C=async()=>{var l;I.value=!0;try{const e={search:V.value||void 0,user_name:w.value||void 0,folder_name:g.value||void 0,created_from:k.value||void 0,created_to:b.value||void 0,per_page:u.value,page:p.value,sort_by:P.value,sort_order:A.value},n=await W("/words",{method:"GET",params:e});n.status==="success"&&(z.value=n.data,E.value=((l=n.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching words",e)}finally{I.value=!1}},oe=()=>{V.value="",w.value="",g.value="",k.value="",b.value=""};ce(()=>{C()}),fe([V,w,g,k,b,u,p,P,A],C);const ae=_e(()=>z.value),N=r(!1),S=r(!1),G=r(null),le=l=>{G.value=l,S.value=!0},re=async l=>{try{await W("/words",{method:"POST",body:l}),v("تم إضافة الكلمة بنجاح","success"),C()}catch{v("حدث خطأ، حاول مرة أخرى","error")}},se=async(l,e)=>{try{await W(`/words/${l}/update`,{method:"POST",body:e}),v("تم تعديل الكلمة بنجاح","success"),C()}catch{v("حدث خطأ، حاول مرة أخرى","error")}},ne=async l=>{try{await W(`/words/${l}/delete`,{method:"POST"}),v("تم حذف الكلمة بنجاح","success"),C()}catch{v("حدث خطأ أثناء الحذف","error")}},c=r(null),T=r(null),ie=l=>{if(l.audio_url)if(c.value&&(c.value.pause(),c.value.currentTime=0),T.value===l.id)T.value=null,c.value=null;else{const e=new Audio(l.audio_url);c.value=e,T.value=l.id,e.play(),e.onended=()=>{T.value=null,c.value=null}}};return(l,e)=>{const n=ve,F=pe,L=me,O=Ve("IconBtn"),de=ue;return i(),_("section",null,[o(j,{class:"mb-6"},{default:a(()=>[o(be,{class:"pb-4"},{default:a(()=>[o(q,null,{default:a(()=>e[18]||(e[18]=[s("الكلمات")])),_:1,__:[18]})]),_:1}),o(H,{class:"d-flex flex-wrap gap-4 align-center"},{default:a(()=>[d("div",Be,[d("div",Se,[o(n,{label:"عرض","model-value":u.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=parseInt(t,10))},null,8,["model-value","items"])]),d("div",We,[o(F,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),placeholder:"بحث بالكلمة أو الترجمة",label:"بحث بالكلمة أو الترجمة"},null,8,["modelValue"])]),d("div",Pe,[o(F,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=t=>w.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),d("div",Ae,[o(F,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),d("div",Ee,[o(L,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),d("div",Ie,[o(L,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=t=>b.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])])]),d("div",Ne,[o($,{"prepend-icon":"tabler-rotate-clockwise",onClick:oe,variant:"outlined"},{default:a(()=>e[19]||(e[19]=[s("إعادة تعيين")])),_:1,__:[19]}),o($,{"prepend-icon":"tabler-plus",onClick:e[6]||(e[6]=t=>N.value=!0)},{default:a(()=>e[20]||(e[20]=[s("إضافة كلمة جديدة")])),_:1,__:[20]})])]),_:1}),o($e),o(De,{"items-per-page":u.value,"onUpdate:itemsPerPage":e[8]||(e[8]=t=>u.value=t),"model-value":R.value,"onUpdate:modelValue":e[9]||(e[9]=t=>R.value=t),page:p.value,"onUpdate:page":e[10]||(e[10]=t=>p.value=t),items:ae.value,"item-value":"id","items-length":E.value,headers:ee,class:"text-no-wrap",loading:I.value,"onUpdate:options":J},{"item.word":a(({item:t})=>[s(m(t.word),1)]),"item.translation":a(({item:t})=>[s(m(t.translation),1)]),"item.example_sentence":a(({item:t})=>[s(m(t.example_sentence),1)]),"item.audio":a(({item:t})=>[t.audio_url?(i(),h(O,{key:0,onClick:f=>ie(t),title:"تشغيل/إيقاف"},{default:a(()=>[o(y,{icon:T.value===t.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])):(i(),_("span",Fe,"-"))]),"item.folder_name":a(({item:t})=>[t.folder_id?(i(),_("a",{key:0,onClick:Q(f=>Z(M).push(`/admin/folders/${t.folder_id}`),["prevent"]),class:"text-primary cursor-pointer"},m(t.folder_name),9,Oe)):(i(),_("span",he,"-"))]),"item.user_name":a(({item:t})=>[t.user_id?(i(),_("a",{key:0,onClick:Q(f=>Z(M).push(`/admin/users/${t.user_id}`),["prevent"]),class:"text-primary cursor-pointer"},m(t.user_name),9,Me)):(i(),_("span",Re,"-"))]),"item.created_at":a(({item:t})=>[s(m(te(t.created_at)),1)]),"item.actions":a(({item:t})=>[o(O,{onClick:f=>le(t)},{default:a(()=>[o(y,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),o(O,{onClick:f=>K(t.id)},{default:a(()=>[o(y,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:a(()=>[o(de,{page:p.value,"onUpdate:page":e[7]||(e[7]=t=>p.value=t),"items-per-page":u.value,"total-items":E.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(ge,{"is-drawer-open":N.value,"onUpdate:isDrawerOpen":e[11]||(e[11]=t=>N.value=t),onWordData:re},null,8,["is-drawer-open"]),o(ke,{"is-drawer-open":S.value,"onUpdate:isDrawerOpen":e[12]||(e[12]=t=>S.value=t),"word-data":G.value,onSubmitWord:e[13]||(e[13]=async(t,f)=>{try{await se(t,f),S.value=!1}catch{}})},null,8,["is-drawer-open","word-data"]),o(Ce,{modelValue:D.value,"onUpdate:modelValue":e[15]||(e[15]=t=>D.value=t),color:U.value,location:"top end",timeout:"5000"},{prepend:a(()=>[U.value==="success"?(i(),h(y,{key:0,icon:"tabler-check"})):U.value==="error"?(i(),h(y,{key:1,icon:"tabler-alert-circle"})):we("",!0)]),actions:a(()=>[o($,{icon:"",variant:"text",color:"white",onClick:e[14]||(e[14]=t=>D.value=!1)},{default:a(()=>[o(y,{icon:"tabler-x"})]),_:1})]),default:a(()=>[s(" "+m(Y.value)+" ",1)]),_:1},8,["modelValue","color"]),o(Te,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=t=>x.value=t),"max-width":"500px"},{default:a(()=>[o(j,null,{default:a(()=>[o(q,{class:"text-h6"},{default:a(()=>e[21]||(e[21]=[s("تأكيد الحذف")])),_:1,__:[21]}),o(H,null,{default:a(()=>e[22]||(e[22]=[s("هل أنت متأكد أنك تريد حذف هذه الكلمة؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[22]}),o(xe,{class:"px-6 pb-4"},{default:a(()=>[o(Ue),o($,{color:"error",variant:"flat",onClick:e[16]||(e[16]=t=>x.value=!1)},{default:a(()=>e[23]||(e[23]=[s("إلغاء")])),_:1,__:[23]}),o($,{color:"success",variant:"flat",onClick:X},{default:a(()=>e[24]||(e[24]=[s("موافق")])),_:1,__:[24]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{zt as default};
