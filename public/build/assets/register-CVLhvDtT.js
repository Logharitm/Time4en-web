import{r as g,e as L}from"./validators-DpYrMFzk.js";import{r as f,i as P,a as E,c as N,o as v,b as a,e as o,d as i,l as e,G as b,t as h,ak as S,f as T,k as U,s as _,a5 as D,F as M}from"./main-DNfLAd1v.js";import{_ as $}from"./AppTextField-bQg7W9yv.js";import{V as j}from"./VNodeRenderer-BPyFMg-b.js";import{u as k}from"./useGenerateImageVariant-CsNt7r-3.js";import{a as A,b as G,c as O,d as z}from"./auth-v2-register-illustration-light-C9iRgAjB.js";import{m as H,a as J}from"./misc-mask-light-Bi5cOsdU.js";import{$ as K}from"./api-CG0ResGa.js";import{a as n,V as x}from"./VRow-BSHRD7Gb.js";import{V as Q}from"./VImg-BsFDuQT2.js";import{V as W}from"./VCard-BDIcrJ3p.js";import{V as R}from"./VCardText-Y7-FchBH.js";import{V as X}from"./VForm-2E3Px0Nj.js";import{V as Y}from"./VCheckbox-Co_xixli.js";import{V as Z}from"./form-CfugG8qP.js";import{V as ee}from"./VAlert-mKPJuIUo.js";import"./helpers-DK5QwNv0.js";import"./VTextField-BmFH42NL.js";/* empty css                   */import"./VCounter-MWCAtdBt.js";import"./VField-vs5XHZ7e.js";import"./easing-Bybner-F.js";import"./VInput-BXAyU4Wu.js";import"./forwardRefs-C-GTDzx5.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-CZFOTnPR.js";import"./VCheckboxBtn-DeqLNsjG.js";import"./VSelectionControl-TafdbK98.js";const ae={class:"auth-logo d-flex align-center gap-x-3"},re={class:"auth-title"},oe={class:"position-relative bg-background w-100 me-0"},se={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"100px"}},te=["src"],le={class:"d-flex align-center my-4"},Ue={__name:"register",setup(ie){const q=k(z,O,G,A,!0),C=k(J,H),t=f({name:"",email:"",password:"",password_confirmation:"",privacyPolicies:!1}),p=f(!1),w=f(),B=P(),u=f({name:void 0,email:void 0,password:void 0}),y=f(null),I=async()=>{try{const s=await K("/register",{method:"POST",body:{name:t.value.name,email:t.value.email,password:t.value.password,password_confirmation:t.value.password_confirmation},onResponseError({response:d}){var m,l;if((m=d._data)!=null&&m.errors){const c={};d._data.errors.forEach(V=>{c[V.field]||(c[V.field]=[]),c[V.field].push(V.message)}),u.value=c}else(l=d._data)!=null&&l.message&&(u.value={email:[d._data.message]})}});((s==null?void 0:s.status)??s)==="success"&&B.replace("/login")}catch(s){console.error("Register error:",s),u.value={email:["Something went wrong, please try again."]}}},F=()=>{var s;(s=w.value)==null||s.validate().then(({valid:r})=>{r&&t.value.privacyPolicies&&I()})};return(s,r)=>{const d=E("RouterLink"),m=$;return v(),N(M,null,[a(d,{to:"/"},{default:o(()=>[i("div",ae,[a(e(j),{nodes:e(b).app.logo},null,8,["nodes"]),i("h1",re,h(e(b).app.title),1)])]),_:1}),a(x,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:o(()=>[a(n,{md:"8",class:"d-none d-md-flex"},{default:o(()=>[i("div",oe,[i("div",se,[a(Q,{"max-width":"500",src:e(q),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),i("img",{class:"auth-footer-mask",src:e(C),alt:"auth-footer-mask",height:"280",width:"100"},null,8,te)])]),_:1}),a(n,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:o(()=>[a(W,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:o(()=>[a(R,null,{default:o(()=>r[6]||(r[6]=[i("h4",{class:"text-h4 mb-1"}," تسجيل حساب جديد ",-1)])),_:1,__:[6]}),a(R,null,{default:o(()=>[a(e(X),{ref_key:"refVForm",ref:w,onSubmit:S(F,["prevent"])},{default:o(()=>[a(x,null,{default:o(()=>[a(n,{cols:"12"},{default:o(()=>[a(m,{modelValue:e(t).name,"onUpdate:modelValue":r[0]||(r[0]=l=>e(t).name=l),label:"الاسم",rules:["requiredValidator"in s?s.requiredValidator:e(g)],"error-messages":e(u).name,autofocus:""},null,8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12"},{default:o(()=>[a(m,{modelValue:e(t).email,"onUpdate:modelValue":r[1]||(r[1]=l=>e(t).email=l),label:"البريد الإلكتروني",type:"email",rules:["requiredValidator"in s?s.requiredValidator:e(g),"emailValidator"in s?s.emailValidator:e(L)],"error-messages":e(u).email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12"},{default:o(()=>[a(m,{modelValue:e(t).password,"onUpdate:modelValue":r[2]||(r[2]=l=>e(t).password=l),label:"كلمة المرور",type:e(p)?"text":"password",rules:["requiredValidator"in s?s.requiredValidator:e(g)],"error-messages":e(u).password,autocomplete:"new-password",placeholder:"••••••••","append-inner-icon":e(p)?"tabler-eye-off":"tabler-eye","onClick:appendInner":r[3]||(r[3]=l=>p.value=!e(p))},null,8,["modelValue","type","rules","error-messages","append-inner-icon"])]),_:1}),a(n,{cols:"12"},{default:o(()=>[a(m,{modelValue:e(t).password_confirmation,"onUpdate:modelValue":r[4]||(r[4]=l=>e(t).password_confirmation=l),label:"تأكيد كلمة المرور",type:e(p)?"text":"password",rules:["requiredValidator"in s?s.requiredValidator:e(g)],autocomplete:"new-password",placeholder:"••••••••"},null,8,["modelValue","type","rules"])]),_:1}),a(n,{cols:"12"},{default:o(()=>[i("div",le,[a(Y,{modelValue:e(t).privacyPolicies,"onUpdate:modelValue":r[5]||(r[5]=l=>e(t).privacyPolicies=l),inline:""},null,8,["modelValue"]),a(Z,{for:"privacy-policy"},{default:o(()=>r[7]||(r[7]=[i("span",{class:"me-1"},"أوافق على",-1),i("a",{href:"javascript:void(0)",class:"text-primary"},"سياسة الخصوصية والشروط",-1)])),_:1,__:[7]})])]),_:1}),e(y)?(v(),T(n,{key:0,cols:"12"},{default:o(()=>[a(ee,{type:"error",border:"start",class:"mb-4"},{default:o(()=>[_(h(e(y)),1)]),_:1})]),_:1})):U("",!0),a(n,{cols:"12"},{default:o(()=>[a(D,{block:"",type:"submit"},{default:o(()=>r[8]||(r[8]=[_(" تسجيل ")])),_:1,__:[8]})]),_:1}),a(n,{cols:"12",class:"text-center text-base"},{default:o(()=>[r[10]||(r[10]=i("span",null,"لديك حساب بالفعل؟",-1)),a(d,{class:"text-primary ms-1",to:{name:"login"}},{default:o(()=>r[9]||(r[9]=[_(" تسجيل الدخول ")])),_:1,__:[9]})]),_:1,__:[10]})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Ue as default};
