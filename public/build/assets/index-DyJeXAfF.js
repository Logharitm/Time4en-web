import{_ as re}from"./TablePagination-CwuW6oLx.js";import{_ as se}from"./AppDateTimePicker-BBeFrAfo.js";import{_ as ie}from"./AppTextField-D5JVTNYL.js";import{_ as ne}from"./AppSelect-ChR6kCPv.js";import{r,E as de,w as ue,V as me,c as pe,b as o,e as a,i as ce,a as ve,o as E,s,d as m,ae as y,Z as p,t as C,a_ as fe,l as _e,f as z,k as Ve}from"./main-CJ3s8d7p.js";import ge from"./AddFolderDrawer-B5r3cQ1Z.js";import ye from"./EditFolderDrawer-Dt8njRdi.js";import{$ as x}from"./api-DC_uCCna.js";import{V as G,a as we,b as L,d as be}from"./VCard-DOiW70Vn.js";import{V as ke}from"./VSnackbar-Dfdl6Cm3.js";import{V as Ce}from"./VDialog-8F8JiHqd.js";import{V as Q}from"./VCardText-VHBTSHxW.js";import{V as Z}from"./VSpacer-57lhe_Vn.js";import{V as xe}from"./VDivider-6_WzVrhj.js";import{V as De}from"./VDataTableServer-Dx-MrhJT.js";import"./VPagination-BqP8euJl.js";import"./VField-CSF1ftV9.js";import"./form-BS4iypQI.js";import"./easing-Bybner-F.js";import"./VInput-FsqI7dxe.js";import"./VImg-VQEWjuKh.js";import"./VTextField-D7BXsvve.js";/* empty css                   */import"./VCounter-GzLg6Py-.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CG0RJ4O2.js";import"./VList-DBVDGbkr.js";import"./ssrBoot-S-Kq7Yf9.js";import"./VAvatar-DssCabF4.js";import"./dialog-transition-jVyD8jel.js";import"./VMenu-EgL2IrIQ.js";import"./VOverlay-Cl41DukG.js";import"./delay-BpzKQecu.js";import"./lazy-BIm1Mkg3.js";import"./scopeId-B6ii09tX.js";import"./VCheckboxBtn-BxcksGmC.js";import"./VSelectionControl-b_OFBKOh.js";import"./VChip-BAFqNygk.js";import"./VSlideGroup-DjE7apdW.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-BLEzC_vj.js";import"./vue3-perfect-scrollbar-Dsv-Zo_X.js";import"./VNavigationDrawer-VfMbFvPs.js";import"./VForm-CW34HnJ4.js";import"./VRow-9iT1RU60.js";/* empty css              */import"./AppTextarea-NKqgP66u.js";import"./VTextarea-DOcU--ga.js";import"./index-CvOPxmL5.js";import"./VDataTable-DMwGSS5p.js";import"./VTable-INudgHX2.js";import"./filter-DHDBAYKc.js";const Te={class:"me-3 d-flex gap-3"},$e={style:{"min-width":"200px"}},Ue={style:{"min-width":"200px"}},Fe={style:{"min-width":"160px"}},Be={style:{"min-width":"160px"}},Pe=["onClick"],St={__name:"index",setup(Se){const I=ce(),c=r(""),v=r(""),f=r(""),_=r(""),n=r(10),d=r(1),D=r(),T=r(),N=r([]),j=l=>{var e,i;D.value=(e=l.sortBy[0])==null?void 0:e.key,T.value=(i=l.sortBy[0])==null?void 0:i.order},w=r(!1),O=r(""),b=r("success"),u=(l,e="success")=>{O.value=l,b.value=e,w.value=!0},V=r(!1),k=r(null),q=l=>{k.value=l,V.value=!0},H=async()=>{k.value&&(await ae(k.value),V.value=!1,k.value=null)},J=[{title:"اسم المجلد",key:"name"},{title:"الوصف",key:"description"},{title:"المستخدم",key:"user_name"},{title:"عدد الكلمات",key:"words_count"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"العمليات",key:"actions",sortable:!1}],A=r([]),$=r(0),U=r(!0),K=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",g=async()=>{var l;U.value=!0;try{const e={search:c.value||void 0,user_name:v.value||void 0,created_from:f.value||void 0,created_to:_.value||void 0,per_page:n.value,page:d.value,sort_by:D.value,sort_order:T.value},i=await x("/folders",{method:"GET",params:e});i.status==="success"&&(A.value=i.data,$.value=((l=i.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching folders",e)}finally{U.value=!1}},W=()=>{c.value="",v.value="",f.value="",_.value=""};de(()=>{g()}),ue([c,v,f,_,n,d,D,T],g);const X=me(()=>A.value),F=r(!1),B=r(!1),M=r(null),h=l=>{M.value=l,B.value=!0},ee=l=>I.push(`/admin/folders/${l}`),te=async l=>{try{await x("/folders",{method:"POST",body:l}),u("تم إضافة المجلد بنجاح","success"),g()}catch{u("حدث خطأ، حاول مرة أخرى","error")}},oe=async(l,e)=>{try{await x(`/folders/${l}/update`,{method:"POST",body:e}),u("تم تعديل المجلد بنجاح","success"),g()}catch{u("حدث خطأ، حاول مرة أخرى","error")}},ae=async l=>{try{await x(`/folders/${l}/delete`,{method:"POST"}),u("تم حذف المجلد بنجاح","success"),g()}catch{u("حدث خطأ أثناء الحذف","error")}};return(l,e)=>{const i=ne,R=ie,Y=se,P=ve("IconBtn"),le=re;return E(),pe("section",null,[o(G,{class:"mb-6"},{default:a(()=>[o(we,{class:"pb-4"},{default:a(()=>[o(L,null,{default:a(()=>e[16]||(e[16]=[s("المجلدات")])),_:1,__:[16]})]),_:1}),o(Q,{class:"d-flex flex-wrap gap-4 align-center"},{default:a(()=>[m("div",Te,[o(i,{label:"عرض","model-value":n.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=parseInt(t,10))},null,8,["model-value","items"])]),m("div",$e,[o(R,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),placeholder:"بحث باسم المجلد او الوصف",label:"اسم المجلد او الوصف"},null,8,["modelValue"])]),m("div",Ue,[o(R,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),m("div",Fe,[o(Y,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),m("div",Be,[o(Y,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=t=>_.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),o(Z),o(y,{"prepend-icon":"tabler-rotate-clockwise",onClick:W,variant:"outlined"},{default:a(()=>e[17]||(e[17]=[s(" إعادة تعيين ")])),_:1,__:[17]}),o(y,{"prepend-icon":"tabler-plus",onClick:e[5]||(e[5]=t=>F.value=!0)},{default:a(()=>e[18]||(e[18]=[s(" إضافة مجلد جديد ")])),_:1,__:[18]})]),_:1}),o(xe),o(De,{"items-per-page":n.value,"onUpdate:itemsPerPage":e[7]||(e[7]=t=>n.value=t),"model-value":N.value,"onUpdate:modelValue":e[8]||(e[8]=t=>N.value=t),page:d.value,"onUpdate:page":e[9]||(e[9]=t=>d.value=t),items:X.value,"item-value":"id","items-length":$.value,headers:J,class:"text-no-wrap",loading:U.value,"onUpdate:options":j},{"item.user_name":a(({item:t})=>[m("a",{onClick:fe(S=>_e(I).push(`/admin/users/${t.user.id}`),["prevent"]),class:"text-primary cursor-pointer"},C(t.user_name),9,Pe)]),"item.created_at":a(({item:t})=>[s(C(K(t.created_at)),1)]),"item.words_count":a(({item:t})=>[s(C(t.words_count)+" ",1),o(P,{onClick:S=>ee(t.id),title:"عرض الكلمات"},{default:a(()=>[o(p,{icon:"tabler-eye"})]),_:2},1032,["onClick"])]),"item.actions":a(({item:t})=>[o(P,{onClick:S=>h(t)},{default:a(()=>[o(p,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),o(P,{onClick:S=>q(t.id)},{default:a(()=>[o(p,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:a(()=>[o(le,{page:d.value,"onUpdate:page":e[6]||(e[6]=t=>d.value=t),"items-per-page":n.value,"total-items":$.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(ge,{"is-drawer-open":F.value,"onUpdate:isDrawerOpen":e[10]||(e[10]=t=>F.value=t),onFolderData:te},null,8,["is-drawer-open"]),o(ye,{"is-drawer-open":B.value,"onUpdate:isDrawerOpen":e[11]||(e[11]=t=>B.value=t),"folder-data":M.value,onFolderData:oe},null,8,["is-drawer-open","folder-data"]),o(ke,{modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=t=>w.value=t),color:b.value,location:"top end",timeout:"5000"},{prepend:a(()=>[b.value==="success"?(E(),z(p,{key:0,icon:"tabler-check"})):b.value==="error"?(E(),z(p,{key:1,icon:"tabler-alert-circle"})):Ve("",!0)]),actions:a(()=>[o(y,{icon:"",variant:"text",color:"white",onClick:e[12]||(e[12]=t=>w.value=!1)},{default:a(()=>[o(p,{icon:"tabler-x"})]),_:1})]),default:a(()=>[s(" "+C(O.value)+" ",1)]),_:1},8,["modelValue","color"]),o(Ce,{modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=t=>V.value=t),"max-width":"500px"},{default:a(()=>[o(G,null,{default:a(()=>[o(L,{class:"text-h6"},{default:a(()=>e[19]||(e[19]=[s("تأكيد الحذف")])),_:1,__:[19]}),o(Q,null,{default:a(()=>e[20]||(e[20]=[s("هل أنت متأكد أنك تريد حذف هذا المجلد؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[20]}),o(be,{class:"px-6 pb-4"},{default:a(()=>[o(Z),o(y,{color:"error",variant:"flat",onClick:e[14]||(e[14]=t=>V.value=!1)},{default:a(()=>e[21]||(e[21]=[s("إلغاء")])),_:1,__:[21]}),o(y,{color:"success",variant:"flat",onClick:H},{default:a(()=>e[22]||(e[22]=[s("موافق")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{St as default};
