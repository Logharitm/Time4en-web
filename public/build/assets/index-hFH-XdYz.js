import{_ as ie}from"./TablePagination-CsKuvgpz.js";import{_ as de}from"./AppDateTimePicker-Clg7izd1.js";import{_ as ue}from"./AppTextField-bQg7W9yv.js";import{_ as me}from"./AppSelect-CG4IKXjK.js";import{r,E as pe,w as ce,V as ve,c as f,b as a,e as o,i as fe,a as _e,o as i,s,d,a5 as S,Z as _,t as m,ak as Ve,l as we,f as F,k as ye}from"./main-DNfLAd1v.js";import ge from"./AddWordDrawer-C8cQZ4li.js";import ke from"./EditWordDrawer-Vk1_4J-X.js";import{$ as W}from"./api-CG0ResGa.js";import{V as L,a as be,b as Q,d as xe}from"./VCard-BDIcrJ3p.js";import{V as Ce}from"./VSnackbar-B_yuGY2_.js";import{V as Te}from"./VDialog-CeKRzAZu.js";import{V as Z}from"./VCardText-Y7-FchBH.js";import{V as De}from"./VDivider-a3hXnx_6.js";import{V as Ue}from"./VDataTableServer-B8yr_y21.js";import{V as $e}from"./VSpacer-sX-uJlrK.js";import"./VPagination-MbRieGkT.js";import"./VField-vs5XHZ7e.js";import"./form-CfugG8qP.js";import"./easing-Bybner-F.js";import"./VInput-BXAyU4Wu.js";import"./VImg-BsFDuQT2.js";import"./VTextField-BmFH42NL.js";/* empty css                   */import"./VCounter-MWCAtdBt.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CTwOu98Q.js";import"./VList-Bhm1Y8z5.js";import"./ssrBoot-C1TyBKNV.js";import"./VAvatar-CZFOTnPR.js";import"./dialog-transition-B1bqei82.js";import"./VMenu-BMVl-cXu.js";import"./VOverlay-C7pvaibH.js";import"./delay-BBJViIAp.js";import"./lazy-1Dv3bGuJ.js";import"./scopeId-D0odpr3K.js";import"./VCheckboxBtn-DeqLNsjG.js";import"./VSelectionControl-TafdbK98.js";import"./VChip-sbhdW3vd.js";import"./VSlideGroup-BL-GWpu-.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-gpZOQQAI.js";import"./vue3-perfect-scrollbar-i8rGr49W.js";import"./VNavigationDrawer-BG_KtqUH.js";import"./VForm-2E3Px0Nj.js";import"./VRow-BSHRD7Gb.js";/* empty css              */import"./index-CvOPxmL5.js";import"./VDataTable-Cl8mTBzk.js";import"./VTable-BBq4vDoA.js";import"./filter-Gdvm0-1v.js";const Be={class:"d-flex flex-wrap gap-4"},Se={class:"me-3 d-flex gap-3"},We={style:{"min-width":"220px"}},Pe={style:{"min-width":"200px"}},Ae={style:{"min-width":"200px"}},Ee={style:{"min-width":"160px"}},Ie={style:{"min-width":"160px"}},Ne={class:"d-flex gap-3 mt-4"},he={key:1},Fe=["onClick"],Oe={key:1},Me={key:0,class:"text-primary cursor-pointer"},Re={key:1},Rt={__name:"index",setup(Ye){const j=fe(),V=r(""),w=r(""),y=r(""),g=r(""),k=r(""),u=r(10),p=r(1),P=r(),A=r(),O=r([]),q=l=>{var e,n;P.value=(e=l.sortBy[0])==null?void 0:e.key,A.value=(n=l.sortBy[0])==null?void 0:n.order},D=r(!1),M=r(""),U=r("success"),c=(l,e="success")=>{M.value=l,U.value=e,D.value=!0},b=r(!1),$=r(null),H=l=>{$.value=l,b.value=!0},J=async()=>{$.value&&(await re($.value),b.value=!1,$.value=null)},K=[{title:"الكلمة",key:"word"},{title:"الترجمة",key:"translation"},{title:"الصوت",key:"audio",sortable:!1},{title:"المجلد",key:"folder_name"},{title:"المستخدم",key:"user_name"},{title:"تاريخ الإنشاء",key:"created_at"}],R=r([]),E=r(0),I=r(!0),X=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",x=async()=>{var l;I.value=!0;try{const e={search:V.value||void 0,user_name:w.value||void 0,folder_name:y.value||void 0,created_from:g.value||void 0,created_to:k.value||void 0,per_page:u.value,page:p.value,sort_by:P.value,sort_order:A.value},n=await W("/words",{method:"GET",params:e});n.status==="success"&&(R.value=n.data,E.value=((l=n.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching words",e)}finally{I.value=!1}},ee=()=>{V.value="",w.value="",y.value="",g.value="",k.value=""};pe(()=>{x()}),ce([V,w,y,g,k,u,p,P,A],x);const te=ve(()=>R.value),Y=r(!1),B=r(!1),z=r(null),ae=l=>{z.value=l,B.value=!0},oe=async l=>{try{await W("/words",{method:"POST",body:l}),c("تم إضافة الكلمة بنجاح","success"),x()}catch{c("حدث خطأ، حاول مرة أخرى","error")}},le=async(l,e)=>{try{await W(`/words/${l}/update`,{method:"POST",body:e}),c("تم تعديل الكلمة بنجاح","success"),x()}catch{c("حدث خطأ، حاول مرة أخرى","error")}},re=async l=>{try{await W(`/words/${l}/delete`,{method:"POST"}),c("تم حذف الكلمة بنجاح","success"),x()}catch{c("حدث خطأ أثناء الحذف","error")}},v=r(null),C=r(null),se=l=>{if(l.audio_url)if(v.value&&(v.value.pause(),v.value.currentTime=0),C.value===l.id)C.value=null,v.value=null;else{const e=new Audio(l.audio_url);v.value=e,C.value=l.id,e.play(),e.onended=()=>{C.value=null,v.value=null}}};return(l,e)=>{const n=me,N=ue,G=de,h=_e("IconBtn"),ne=ie;return i(),f("section",null,[a(L,{class:"mb-6"},{default:o(()=>[a(be,{class:"pb-4"},{default:o(()=>[a(Q,null,{default:o(()=>e[17]||(e[17]=[s("الكلمات")])),_:1,__:[17]})]),_:1}),a(Z,{class:"d-flex flex-wrap gap-4 align-center"},{default:o(()=>[d("div",Be,[d("div",Se,[a(n,{label:"عرض","model-value":u.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=parseInt(t,10))},null,8,["model-value","items"])]),d("div",We,[a(N,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),placeholder:"بحث بالكلمة أو الترجمة",label:"بحث بالكلمة أو الترجمة"},null,8,["modelValue"])]),d("div",Pe,[a(N,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=t=>w.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),d("div",Ae,[a(N,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=t=>y.value=t),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),d("div",Ee,[a(G,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=t=>g.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),d("div",Ie,[a(G,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=t=>k.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])])]),d("div",Ne,[a(S,{"prepend-icon":"tabler-rotate-clockwise",onClick:ee,variant:"outlined"},{default:o(()=>e[18]||(e[18]=[s("إعادة تعيين")])),_:1,__:[18]})])]),_:1}),a(De),a(Ue,{"items-per-page":u.value,"onUpdate:itemsPerPage":e[7]||(e[7]=t=>u.value=t),"model-value":O.value,"onUpdate:modelValue":e[8]||(e[8]=t=>O.value=t),page:p.value,"onUpdate:page":e[9]||(e[9]=t=>p.value=t),items:te.value,"item-value":"id","items-length":E.value,headers:K,class:"text-no-wrap",loading:I.value,"onUpdate:options":q},{"item.word":o(({item:t})=>[s(m(t.word),1)]),"item.translation":o(({item:t})=>[s(m(t.translation),1)]),"item.example_sentence":o(({item:t})=>[s(m(t.example_sentence),1)]),"item.audio":o(({item:t})=>[t.audio_url?(i(),F(h,{key:0,onClick:T=>se(t),title:"تشغيل/إيقاف"},{default:o(()=>[a(_,{icon:C.value===t.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])):(i(),f("span",he,"-"))]),"item.folder_name":o(({item:t})=>[t.folder_id?(i(),f("a",{key:0,onClick:Ve(T=>we(j).push(`/admin/folders/${t.folder_id}`),["prevent"]),class:"text-primary cursor-pointer"},m(t.folder_name),9,Fe)):(i(),f("span",Oe,"-"))]),"item.user_name":o(({item:t})=>[t.user_id?(i(),f("a",Me,m(t.user_name),1)):(i(),f("span",Re,"-"))]),"item.created_at":o(({item:t})=>[s(m(X(t.created_at)),1)]),"item.actions":o(({item:t})=>[a(h,{onClick:T=>ae(t)},{default:o(()=>[a(_,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),a(h,{onClick:T=>H(t.id)},{default:o(()=>[a(_,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:o(()=>[a(ne,{page:p.value,"onUpdate:page":e[6]||(e[6]=t=>p.value=t),"items-per-page":u.value,"total-items":E.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),a(ge,{"is-drawer-open":Y.value,"onUpdate:isDrawerOpen":e[10]||(e[10]=t=>Y.value=t),onWordData:oe},null,8,["is-drawer-open"]),a(ke,{"is-drawer-open":B.value,"onUpdate:isDrawerOpen":e[11]||(e[11]=t=>B.value=t),"word-data":z.value,onSubmitWord:e[12]||(e[12]=async(t,T)=>{try{await le(t,T),B.value=!1}catch{}})},null,8,["is-drawer-open","word-data"]),a(Ce,{modelValue:D.value,"onUpdate:modelValue":e[14]||(e[14]=t=>D.value=t),color:U.value,location:"top end",timeout:"5000"},{prepend:o(()=>[U.value==="success"?(i(),F(_,{key:0,icon:"tabler-check"})):U.value==="error"?(i(),F(_,{key:1,icon:"tabler-alert-circle"})):ye("",!0)]),actions:o(()=>[a(S,{icon:"",variant:"text",color:"white",onClick:e[13]||(e[13]=t=>D.value=!1)},{default:o(()=>[a(_,{icon:"tabler-x"})]),_:1})]),default:o(()=>[s(" "+m(M.value)+" ",1)]),_:1},8,["modelValue","color"]),a(Te,{modelValue:b.value,"onUpdate:modelValue":e[16]||(e[16]=t=>b.value=t),"max-width":"500px"},{default:o(()=>[a(L,null,{default:o(()=>[a(Q,{class:"text-h6"},{default:o(()=>e[19]||(e[19]=[s("تأكيد الحذف")])),_:1,__:[19]}),a(Z,null,{default:o(()=>e[20]||(e[20]=[s("هل أنت متأكد أنك تريد حذف هذه الكلمة؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[20]}),a(xe,{class:"px-6 pb-4"},{default:o(()=>[a($e),a(S,{color:"error",variant:"flat",onClick:e[15]||(e[15]=t=>b.value=!1)},{default:o(()=>e[21]||(e[21]=[s("إلغاء")])),_:1,__:[21]}),a(S,{color:"success",variant:"flat",onClick:J},{default:o(()=>e[22]||(e[22]=[s("موافق")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Rt as default};
