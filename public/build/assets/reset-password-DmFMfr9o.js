import{_ as B}from"./AppTextField-Bb3N9ibn.js";import{r as m,u as S,a as T,c as F,o as g,b as e,e as t,d as o,l as s,G as b,t as i,ak as L,f as y,k as v,a5 as M,s as j,Z as D,F as q}from"./main-riJjh_1G.js";import{u as k}from"./useGenerateImageVariant-4_ePvabB.js";import{V as G}from"./VNodeRenderer-dRZn08mC.js";import{a as U,b as z}from"./auth-v2-reset-password-illustration-light-DXjlOEVK.js";import{m as A,a as E}from"./misc-mask-light-Bi5cOsdU.js";import{$ as O}from"./api-Bb1wXm8c.js";import{a as n,V as P}from"./VRow-7hJ9GT2Z.js";import{V as Y}from"./VImg-VG8KoBZL.js";import{V as Z}from"./VCard-Ww1Gv9Tx.js";import{V as x}from"./VCardText-DboL7g11.js";import{V as H}from"./VForm-2YER7cAh.js";import"./form-BlpgP43R.js";import"./VTextField-BCjPvh6T.js";/* empty css                   */import"./VCounter-YeBGQbHS.js";import"./VField-NWSrujQx.js";import"./easing-Bybner-F.js";import"./VInput-CqzO5FYe.js";import"./forwardRefs-C-GTDzx5.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-1VQU8uqf.js";const J={class:"auth-logo d-flex align-center gap-x-3"},K={class:"auth-title"},Q={class:"position-relative bg-background w-100 me-0"},W={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"150px"}},X=["src"],ee={class:"text-h4 mb-1"},se={class:"mb-0"},te={class:"text-success text-center"},ae={class:"text-error text-center"},Ie={__name:"reset-password",setup(oe){const d=m({newPassword:"",confirmPassword:""}),V=S(),C=V.query.token||"",$=V.query.email||"",I=k(z,U),R=k(E,A),p=m(!1),f=m(!1),_=m(!1),w=m(""),h=m(""),N=async()=>{var r,a,u;w.value="",h.value="",_.value=!0;try{const l=await O("/reset-password",{method:"POST",body:{token:C,email:$,password:d.value.newPassword,password_confirmation:d.value.confirmPassword}});w.value=l.message||"Password has been reset successfully."}catch(l){h.value=((u=(a=(r=l==null?void 0:l.data)==null?void 0:r.errors)==null?void 0:a.email)==null?void 0:u[0])||"Something went wrong, please try again."}finally{_.value=!1}};return(r,a)=>{const u=T("RouterLink"),l=B;return g(),F(q,null,[e(u,{to:"/"},{default:t(()=>[o("div",J,[e(s(G),{nodes:s(b).app.logo},null,8,["nodes"]),o("h1",K,i(s(b).app.title),1)])]),_:1}),e(P,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[e(n,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[o("div",Q,[o("div",W,[e(Y,{"max-width":"451",src:s(I),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),o("img",{class:"auth-footer-mask flip-in-rtl",src:s(R),alt:"auth-footer-mask",height:"280",width:"100"},null,8,X)])]),_:1}),e(n,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[e(Z,{flat:"","max-width":"500",class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[e(x,null,{default:t(()=>[o("h4",ee,i(r.$t("Reset Password"))+" 🔒 ",1),o("p",se,i(r.$t("Your new password must be different from previously used passwords")),1)]),_:1}),e(x,null,{default:t(()=>[e(H,{onSubmit:L(N,["prevent"])},{default:t(()=>[e(P,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(l,{modelValue:s(d).newPassword,"onUpdate:modelValue":a[0]||(a[0]=c=>s(d).newPassword=c),autofocus:"",label:r.$t("New Password"),placeholder:"············",type:s(p)?"text":"password",autocomplete:"password","append-inner-icon":s(p)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[1]||(a[1]=c=>p.value=!s(p))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),e(n,{cols:"12"},{default:t(()=>[e(l,{modelValue:s(d).confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=c=>s(d).confirmPassword=c),label:r.$t("Confirm Password"),autocomplete:"confirm-password",placeholder:"············",type:s(f)?"text":"password","append-inner-icon":s(f)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[3]||(a[3]=c=>f.value=!s(f))},null,8,["modelValue","label","type","append-inner-icon"])]),_:1}),s(w)?(g(),y(n,{key:0,cols:"12"},{default:t(()=>[o("div",te,i(s(w)),1)]),_:1})):v("",!0),s(h)?(g(),y(n,{key:1,cols:"12"},{default:t(()=>[o("div",ae,i(s(h)),1)]),_:1})):v("",!0),e(n,{cols:"12"},{default:t(()=>[e(M,{block:"",type:"submit",loading:s(_)},{default:t(()=>[j(i(r.$t("Set New Password")),1)]),_:1},8,["loading"])]),_:1}),e(n,{cols:"12"},{default:t(()=>[e(u,{class:"d-flex align-center justify-center",to:{name:"pages-authentication-login-v2"}},{default:t(()=>[e(D,{icon:"tabler-chevron-left",size:"20",class:"me-1 flip-in-rtl"}),o("span",null,i(r.$t("Back to login")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Ie as default};
