import{V as q,m as L}from"./VField-v42BI7p0.js";import{a as T}from"./VOverlay-CF5OZ2zX.js";import{am as K,$ as W,aq as Z,aE as $,bn as z,V as b,r as y,aH as E,W as c,w as V,a4 as H,bW as M,b as r,F as Q,p as k,bZ as G,bQ as J,aB as U,bv as F,aZ as X}from"./main-CfNsrW5X.js";import{u as Y,m as ee}from"./form-Dho8Ouqi.js";const te=W({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...U(),...ee(),...J(L({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),oe=K()({name:"VOtpInput",props:te(),emits:{finish:t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,x){let{attrs:A,emit:P,slots:s}=x;const{dimensionStyles:w}=Z(t),{isFocused:g,focus:D,blur:_}=Y(t),o=$(t,"modelValue","",e=>e==null?[]:String(e).split(""),e=>e.join("")),{t:B}=z(),v=b(()=>Number(t.length)),C=b(()=>Array(v.value).fill(0)),i=y(-1),m=y(),d=y([]),p=b(()=>d.value[i.value]);function I(){if(h(p.value.value)){p.value.value="";return}const e=o.value.slice(),a=p.value.value;e[i.value]=a;let u=null;i.value>o.value.length?u=o.value.length+1:i.value+1!==v.value&&(u="next"),o.value=e,u&&F(m.value,u)}function S(e){const a=o.value.slice(),u=i.value;let n=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(e.key)&&(e.preventDefault(),e.key==="ArrowLeft"?n="prev":e.key==="ArrowRight"?n="next":["Backspace","Delete"].includes(e.key)&&(a[i.value]="",o.value=a,i.value>0&&e.key==="Backspace"?n="prev":requestAnimationFrame(()=>{var l;(l=d.value[u])==null||l.select()})),requestAnimationFrame(()=>{n!=null&&F(m.value,n)}))}function R(e,a){var n,l;a.preventDefault(),a.stopPropagation();const u=((n=a==null?void 0:a.clipboardData)==null?void 0:n.getData("Text").slice(0,v.value))??"";h(u)||(o.value=u.split(""),(l=d.value)==null||l[e].blur())}function N(){o.value=[]}function O(e,a){D(),i.value=a}function j(){_(),i.value=-1}function h(e){return t.type==="number"&&/[^0-9]/g.test(e)}return E({VField:{color:c(()=>t.color),bgColor:c(()=>t.color),baseColor:c(()=>t.baseColor),disabled:c(()=>t.disabled),error:c(()=>t.error),variant:c(()=>t.variant)}},{scoped:!0}),V(o,e=>{e.length===v.value&&P("finish",e.join(""))},{deep:!0}),V(i,e=>{e<0||X(()=>{var a;(a=d.value[e])==null||a.select()})}),H(()=>{var u;const[e,a]=M(A);return r("div",k({class:["v-otp-input",{"v-otp-input--divided":!!t.divider},t.class],style:[t.style]},e),[r("div",{ref:m,class:"v-otp-input__content",style:[w.value]},[C.value.map((n,l)=>r(Q,null,[t.divider&&l!==0&&r("span",{class:"v-otp-input__divider"},[t.divider]),r(q,{focused:g.value&&t.focusAll||i.value===l,key:l},{...s,loader:void 0,default:()=>r("input",{ref:f=>d.value[l]=f,"aria-label":B(t.label,l+1),autofocus:l===0&&t.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:t.disabled,inputmode:t.type==="number"?"numeric":"text",min:t.type==="number"?0:void 0,maxlength:l===0?v.value:"1",placeholder:t.placeholder,type:t.type==="number"?"text":t.type,value:o.value[l],onInput:I,onFocus:f=>O(f,l),onBlur:j,onKeydown:S,onPaste:f=>R(l,f)},null)})])),r("input",k({class:"v-otp-input-input",type:"hidden"},a,{value:o.value.join("")}),null),r(T,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!t.loading,persistent:!0},{default:()=>{var n;return[((n=s.loader)==null?void 0:n.call(s))??r(G,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(u=s.default)==null?void 0:u.call(s)])])}),{blur:()=>{var e;(e=d.value)==null||e.some(a=>a.blur())},focus:()=>{var e;(e=d.value)==null||e[0].focus()},reset:N,isFocused:g}}});export{oe as V};
