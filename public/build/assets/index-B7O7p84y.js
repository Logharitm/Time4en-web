import{_ as G}from"./TablePagination-zQTpX4nk.js";import{_ as L}from"./AppDateTimePicker-D2vcM26u.js";import{_ as O}from"./AppTextField-BKY7Obat.js";import{_ as Q}from"./AppSelect-B9_7o4DE.js";import{r as a,E as Z,w as j,V as H,c as _,b as o,e as l,i as J,o as n,s as u,d,a5 as T,l as N,t as g,ak as K,Z as U,f as S,k as W}from"./main-_u0VpwdW.js";import{$ as X}from"./api-DBVzJU_T.js";import{V as ee,a as te,b as ae}from"./VCard-B79k58Wt.js";import{V as oe}from"./VSnackbar-D-U5JoOZ.js";import{V as le}from"./VCardText-BXlXaIa1.js";import{V as re}from"./VDivider-DCgBXANJ.js";import{V as se}from"./VDataTableServer-Ci-VVFgF.js";import"./VPagination-B4nxgBA7.js";import"./VField-CjbtAOEx.js";import"./form-Bd_IIAXy.js";import"./easing-Bybner-F.js";import"./VInput-Dv2Gho2e.js";import"./VImg-DBcGFj66.js";import"./VTextField-Dk0lU6Et.js";/* empty css                   */import"./VCounter-Cxl8Biwl.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-RrxGyohK.js";import"./VList-CZsAgfVe.js";import"./ssrBoot-kUT6Wreq.js";import"./VAvatar-D1mmdnuk.js";import"./dialog-transition-DjWvZdDK.js";import"./VMenu-BJ-s7ZRA.js";import"./VOverlay-CAQYI1wx.js";import"./delay-DLyh6RJL.js";import"./lazy-DCS_tKt6.js";import"./scopeId-CMzkkR7P.js";import"./VCheckboxBtn-B89kIEua.js";import"./VSelectionControl-CwjcJuRG.js";import"./VChip-pD4z4qRZ.js";import"./VSlideGroup-6Xm5Eckt.js";import"./index-CvOPxmL5.js";import"./VDataTable-BE3dPmVa.js";import"./VTable-aPQklYYe.js";import"./filter-DJtXLekM.js";const ie={class:"d-flex flex-wrap gap-4"},ne={class:"me-3 d-flex gap-3"},de={style:{"min-width":"200px"}},me={style:{"min-width":"200px"}},ue={style:{"min-width":"160px"}},pe={style:{"min-width":"160px"}},ce={class:"d-flex gap-3 mt-4"},ve={key:0,class:"text-primary"},fe={key:1},_e=["onClick"],ge={key:1},lt={__name:"index",setup(ye){const h=J(),y=a(""),p=a(""),c=a(""),v=a(""),f=a(""),i=a(10),m=a(1),V=a(),k=a(),$=a([]),z=r=>{var t,s;V.value=(t=r.sortBy[0])==null?void 0:t.key,k.value=(s=r.sortBy[0])==null?void 0:s.order},w=a(!1),E=a(""),x=a("success");a(!1),a(null);const I=[{title:"ID",key:"id"},{title:"المستخدم",key:"user_name"},{title:"المجلد",key:"folder_name"},{title:"عدد الأسئلة",key:"total_words"},{title:"الإجابات الصحيحة",key:"correct_answers"},{title:"الإجابات الخاطئة",key:"wrong_answers"},{title:"النسبة %",key:"score_percentage"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"العمليات",key:"actions",sortable:!1}],B=a([]),b=a(0),C=a(!0),A=r=>r?new Date(r).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",D=async()=>{var r;C.value=!0;try{const t={search:y.value||void 0,user_name:p.value||void 0,folder_name:c.value||void 0,created_from:v.value||void 0,created_to:f.value||void 0,per_page:i.value,page:m.value,sort_by:V.value,sort_order:k.value},s=await X("/practices",{method:"GET",params:t});s.status==="success"&&(B.value=s.data,b.value=((r=s.meta)==null?void 0:r.total)||0)}catch(t){console.error("Error fetching practices",t)}finally{C.value=!1}},M=()=>{y.value="",p.value="",c.value="",v.value="",f.value=""};Z(()=>{D()}),j([y,p,c,v,f,i,m,V,k],D);const R=H(()=>B.value);return(r,t)=>{const s=Q,P=O,F=L,Y=G;return n(),_("section",null,[o(ee,{class:"mb-6"},{default:l(()=>[o(te,{class:"pb-4"},{default:l(()=>[o(ae,null,{default:l(()=>t[11]||(t[11]=[u("الاختبارات")])),_:1,__:[11]})]),_:1}),o(le,{class:"d-flex flex-wrap gap-4 align-center"},{default:l(()=>[d("div",ie,[d("div",ne,[o(s,{label:"عرض","model-value":i.value,items:[10,25,50,100].map(e=>({value:e,title:e})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=parseInt(e,10))},null,8,["model-value","items"])]),d("div",de,[o(P,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),d("div",me,[o(P,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),d("div",ue,[o(F,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),d("div",pe,[o(F,{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=e=>f.value=e),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])])]),d("div",ce,[o(T,{"prepend-icon":"tabler-rotate-clockwise",variant:"outlined",onClick:M},{default:l(()=>t[12]||(t[12]=[u(" إعادة تعيين ")])),_:1,__:[12]})])]),_:1}),o(re),o(se,{"items-per-page":i.value,"onUpdate:itemsPerPage":t[6]||(t[6]=e=>i.value=e),"model-value":$.value,"onUpdate:modelValue":t[7]||(t[7]=e=>$.value=e),page:m.value,"onUpdate:page":t[8]||(t[8]=e=>m.value=e),items:R.value,"item-value":"id","items-length":b.value,headers:I,class:"text-no-wrap",loading:C.value,"onUpdate:options":z},{"item.user_name":l(({item:e})=>[e.user_id?(n(),_("a",ve,g(e.user_name),1)):(n(),_("span",fe,"-"))]),"item.folder_name":l(({item:e})=>[e.folder_id?(n(),_("a",{key:0,class:"text-primary cursor-pointer",onClick:K(q=>N(h).push(`/admin/folders/${e.folder_id}`),["prevent"])},g(e.folder_name),9,_e)):(n(),_("span",ge,"-"))]),"item.score_percentage":l(({item:e})=>[u(g(e.total_words?Math.round(e.correct_answers/e.total_words*100):0)+"% ",1)]),"item.created_at":l(({item:e})=>[u(g(A(e.created_at)),1)]),"item.actions":l(({item:e})=>[o(T,{variant:"outlined",size:"small",color:"primary",onClick:q=>N(h).push(`/admin/quizzes/${e.id}`)},{default:l(()=>t[13]||(t[13]=[u(" عرض النتيجة ")])),_:2,__:[13]},1032,["onClick"])]),bottom:l(()=>[o(Y,{page:m.value,"onUpdate:page":t[5]||(t[5]=e=>m.value=e),"items-per-page":i.value,"total-items":b.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(oe,{modelValue:w.value,"onUpdate:modelValue":t[10]||(t[10]=e=>w.value=e),color:x.value,location:"top end",timeout:"5000"},{prepend:l(()=>[x.value==="success"?(n(),S(U,{key:0,icon:"tabler-check"})):x.value==="error"?(n(),S(U,{key:1,icon:"tabler-alert-circle"})):W("",!0)]),actions:l(()=>[o(T,{icon:"",variant:"text",color:"white",onClick:t[9]||(t[9]=e=>w.value=!1)},{default:l(()=>[o(U,{icon:"tabler-x"})]),_:1})]),default:l(()=>[u(" "+g(E.value)+" ",1)]),_:1},8,["modelValue","color"])])}}};export{lt as default};
