import{r as _,e as F}from"./validators-DpYrMFzk.js";import{aA as L,r as V,i as A,a as E,c as N,o as b,b as e,e as a,d as n,l as r,G as k,t as u,ak as S,f as U,k as D,s as h,a5 as M,F as $}from"./main-BPya9C_m.js";import{_ as j}from"./AppTextField-BxDveB7d.js";import{V as G}from"./VNodeRenderer-DTBWnHRg.js";import{u as x}from"./useGenerateImageVariant-DBScVmQg.js";import{a as O,b as z,c as H,d as J}from"./auth-v2-register-illustration-light-C9iRgAjB.js";import{m as K,a as Q}from"./misc-mask-light-Bi5cOsdU.js";import{$ as W}from"./api-CQJYmhuO.js";import{a as d,V as R}from"./VRow-Cbs66xzv.js";import{V as X}from"./VImg-BPIMXBFo.js";import{V as Y}from"./VCard-k9DIWO39.js";import{V as q}from"./VCardText-Co93LYzR.js";import{V as Z}from"./VForm-B_jSqMjE.js";import{V as ee}from"./VCheckbox-BuMBcOGh.js";import{V as ae}from"./form-BNeh-56c.js";import{V as re}from"./VAlert-ZZRT7F7m.js";import"./helpers-DK5QwNv0.js";import"./VTextField-BoMqGRBo.js";/* empty css                   */import"./VCounter-D4Y8La9P.js";import"./VField-DL3VmOu6.js";import"./easing-Bybner-F.js";import"./VInput-Dtz-Ek0R.js";import"./forwardRefs-C-GTDzx5.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-B1fgSqvX.js";import"./VCheckboxBtn-CkitEl8Y.js";import"./VSelectionControl-BM3e7FCD.js";const se={class:"auth-logo d-flex align-center gap-x-3"},te={class:"auth-title"},le={class:"position-relative bg-background w-100 me-0"},oe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"100px"}},ie=["src"],ne={class:"text-h4 mb-1"},de={class:"d-flex align-center my-4"},ue={class:"me-1"},me={href:"javascript:void(0)",class:"text-primary"},je={__name:"register",setup(pe){const{t:i}=L({useScope:"global"}),C=x(J,H,z,O,!0),I=x(Q,K),t=V({name:"",email:"",password:"",password_confirmation:"",privacyPolicies:!1}),f=V(!1),y=V(),P=A(),c=V({name:void 0,email:void 0,password:void 0}),w=V(null),B=async()=>{try{const s=await W("/register",{method:"POST",body:{name:t.value.name,email:t.value.email,password:t.value.password,password_confirmation:t.value.password_confirmation},onResponseError({response:m}){var p,o;if((p=m._data)!=null&&p.errors){const g={};m._data.errors.forEach(v=>{g[v.field]||(g[v.field]=[]),g[v.field].push(v.message)}),c.value=g}else(o=m._data)!=null&&o.message&&(c.value={email:[m._data.message]})}});((s==null?void 0:s.status)??s)==="success"&&P.replace("/login")}catch(s){console.error("Register error:",s),c.value={email:[i("register.errorTryAgain")]}}},T=()=>{var s;(s=y.value)==null||s.validate().then(({valid:l})=>{l&&t.value.privacyPolicies&&B()})};return(s,l)=>{const m=E("RouterLink"),p=j;return b(),N($,null,[e(m,{to:"/"},{default:a(()=>[n("div",se,[e(r(G),{nodes:r(k).app.logo},null,8,["nodes"]),n("h1",te,u(r(k).app.title),1)])]),_:1}),e(R,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:a(()=>[e(d,{md:"8",class:"d-none d-md-flex"},{default:a(()=>[n("div",le,[n("div",oe,[e(X,{"max-width":"500",src:r(C),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),n("img",{class:"auth-footer-mask",src:r(I),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ie)])]),_:1}),e(d,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:a(()=>[e(Y,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:a(()=>[e(q,null,{default:a(()=>[n("h4",ne,u(r(i)("register.title")),1)]),_:1}),e(q,null,{default:a(()=>[e(r(Z),{ref_key:"refVForm",ref:y,onSubmit:S(T,["prevent"])},{default:a(()=>[e(R,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:t.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.name=o),label:r(i)("register.name"),rules:["requiredValidator"in s?s.requiredValidator:r(_)],"error-messages":c.value.name,autofocus:""},null,8,["modelValue","label","rules","error-messages"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:t.value.email,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.email=o),label:r(i)("register.email"),type:"email",rules:["requiredValidator"in s?s.requiredValidator:r(_),"emailValidator"in s?s.emailValidator:r(F)],"error-messages":c.value.email},null,8,["modelValue","label","rules","error-messages"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:t.value.password,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.password=o),label:r(i)("register.password"),type:f.value?"text":"password",rules:["requiredValidator"in s?s.requiredValidator:r(_)],"error-messages":c.value.password,autocomplete:"new-password",placeholder:"••••••••","append-inner-icon":f.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[3]||(l[3]=o=>f.value=!f.value)},null,8,["modelValue","label","type","rules","error-messages","append-inner-icon"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(p,{modelValue:t.value.password_confirmation,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.password_confirmation=o),label:r(i)("register.confirmPassword"),type:f.value?"text":"password",rules:["requiredValidator"in s?s.requiredValidator:r(_)],autocomplete:"new-password",placeholder:"••••••••"},null,8,["modelValue","label","type","rules"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[n("div",de,[e(ee,{modelValue:t.value.privacyPolicies,"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.privacyPolicies=o),inline:""},null,8,["modelValue"]),e(ae,{for:"privacy-policy"},{default:a(()=>[n("span",ue,u(r(i)("register.agreeText")),1),n("a",me,u(r(i)("register.privacyPolicy")),1)]),_:1})])]),_:1}),w.value?(b(),U(d,{key:0,cols:"12"},{default:a(()=>[e(re,{type:"error",border:"start",class:"mb-4"},{default:a(()=>[h(u(w.value),1)]),_:1})]),_:1})):D("",!0),e(d,{cols:"12"},{default:a(()=>[e(M,{block:"",type:"submit"},{default:a(()=>[h(u(r(i)("register.submit")),1)]),_:1})]),_:1}),e(d,{cols:"12",class:"text-center text-base"},{default:a(()=>[n("span",null,u(r(i)("register.haveAccount")),1),e(m,{class:"text-primary ms-1",to:{name:"login"}},{default:a(()=>[h(u(r(i)("register.login")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{je as default};
