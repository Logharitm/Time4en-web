import{_ as me}from"./TablePagination-CwuW6oLx.js";import{_ as pe}from"./AppDateTimePicker-BBeFrAfo.js";import{_ as ve}from"./AppTextField-D5JVTNYL.js";import{_ as ce}from"./AppSelect-ChR6kCPv.js";import{r,E as fe,w as _e,V as Ve,c,b as o,e as a,i as ye,a as we,o as i,s,d as f,ae as D,Z as _,t as u,a_ as Q,l as Z,f as h,k as ge}from"./main-CJ3s8d7p.js";import ke from"./AddWordDrawer-DsBvW8R7.js";import be from"./EditWordDrawer-BGFLj1ym.js";import{$ as W}from"./api-DC_uCCna.js";import{V as j,a as xe,b as q,d as Ce}from"./VCard-DOiW70Vn.js";import{V as De}from"./VSnackbar-Dfdl6Cm3.js";import{V as Te}from"./VDialog-8F8JiHqd.js";import{V as H}from"./VCardText-VHBTSHxW.js";import{V as J}from"./VSpacer-57lhe_Vn.js";import{V as $e}from"./VDivider-6_WzVrhj.js";import{V as Ue}from"./VDataTableServer-Dx-MrhJT.js";import"./VPagination-BqP8euJl.js";import"./VField-CSF1ftV9.js";import"./form-BS4iypQI.js";import"./easing-Bybner-F.js";import"./VInput-FsqI7dxe.js";import"./VImg-VQEWjuKh.js";import"./VTextField-D7BXsvve.js";/* empty css                   */import"./VCounter-GzLg6Py-.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CG0RJ4O2.js";import"./VList-DBVDGbkr.js";import"./ssrBoot-S-Kq7Yf9.js";import"./VAvatar-DssCabF4.js";import"./dialog-transition-jVyD8jel.js";import"./VMenu-EgL2IrIQ.js";import"./VOverlay-Cl41DukG.js";import"./delay-BpzKQecu.js";import"./lazy-BIm1Mkg3.js";import"./scopeId-B6ii09tX.js";import"./VCheckboxBtn-BxcksGmC.js";import"./VSelectionControl-b_OFBKOh.js";import"./VChip-BAFqNygk.js";import"./VSlideGroup-DjE7apdW.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppDrawerHeaderSection-BLEzC_vj.js";import"./vue3-perfect-scrollbar-Dsv-Zo_X.js";import"./VNavigationDrawer-VfMbFvPs.js";import"./VForm-CW34HnJ4.js";import"./VRow-9iT1RU60.js";/* empty css              */import"./index-CvOPxmL5.js";import"./VDataTable-DMwGSS5p.js";import"./VTable-INudgHX2.js";import"./filter-DHDBAYKc.js";const Be={class:"me-3 d-flex gap-3"},We={style:{"min-width":"220px"}},Pe={style:{"min-width":"200px"}},Se={style:{"min-width":"200px"}},Ae={style:{"min-width":"160px"}},Ee={style:{"min-width":"160px"}},Ie={key:1},Ne=["onClick"],Fe={key:1},Oe=["onClick"],he={key:1},Ot={__name:"index",setup(Me){const M=ye(),V=r(""),y=r(""),w=r(""),g=r(""),k=r(""),d=r(10),m=r(1),P=r(),S=r(),R=r([]),K=l=>{var e,n;P.value=(e=l.sortBy[0])==null?void 0:e.key,S.value=(n=l.sortBy[0])==null?void 0:n.order},T=r(!1),Y=r(""),$=r("success"),p=(l,e="success")=>{Y.value=l,$.value=e,T.value=!0},b=r(!1),U=r(null),X=l=>{U.value=l,b.value=!0},ee=async()=>{U.value&&(await ie(U.value),b.value=!1,U.value=null)},te=[{title:"الكلمة",key:"word"},{title:"الترجمة",key:"translation"},{title:"الجملة",key:"example_sentence"},{title:"الصوت",key:"audio",sortable:!1},{title:"المجلد",key:"folder_name"},{title:"المستخدم",key:"user_name"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"العمليات",key:"actions",sortable:!1}],z=r([]),A=r(0),E=r(!0),oe=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",x=async()=>{var l;E.value=!0;try{const e={search:V.value||void 0,user_name:y.value||void 0,folder_name:w.value||void 0,created_from:g.value||void 0,created_to:k.value||void 0,per_page:d.value,page:m.value,sort_by:P.value,sort_order:S.value},n=await W("/words",{method:"GET",params:e});n.status==="success"&&(z.value=n.data,A.value=((l=n.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching words",e)}finally{E.value=!1}},ae=()=>{V.value="",y.value="",w.value="",g.value="",k.value=""};fe(()=>{x()}),_e([V,y,w,g,k,d,m,P,S],x);const le=Ve(()=>z.value),I=r(!1),N=r(!1),G=r(null),re=l=>{G.value=l,N.value=!0},se=async l=>{try{await W("/words",{method:"POST",body:l}),p("تم إضافة الكلمة بنجاح","success"),x()}catch{p("حدث خطأ، حاول مرة أخرى","error")}},ne=async(l,e)=>{try{await W(`/words/${l}/update`,{method:"POST",body:e}),p("تم تعديل الكلمة بنجاح","success"),x()}catch{p("حدث خطأ، حاول مرة أخرى","error")}},ie=async l=>{try{await W(`/words/${l}/delete`,{method:"POST"}),p("تم حذف الكلمة بنجاح","success"),x()}catch{p("حدث خطأ أثناء الحذف","error")}},v=r(null),C=r(null),de=l=>{if(l.audio_url)if(v.value&&(v.value.pause(),v.value.currentTime=0),C.value===l.id)C.value=null,v.value=null;else{const e=new Audio(l.audio_url);v.value=e,C.value=l.id,e.play(),e.onended=()=>{C.value=null,v.value=null}}};return(l,e)=>{const n=ce,F=ve,L=pe,O=we("IconBtn"),ue=me;return i(),c("section",null,[o(j,{class:"mb-6"},{default:a(()=>[o(xe,{class:"pb-4"},{default:a(()=>[o(q,null,{default:a(()=>e[17]||(e[17]=[s("الكلمات")])),_:1,__:[17]})]),_:1}),o(H,{class:"d-flex flex-wrap gap-4 align-center"},{default:a(()=>[f("div",Be,[o(n,{label:"عرض","model-value":d.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=parseInt(t,10))},null,8,["model-value","items"])]),f("div",We,[o(F,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),placeholder:"بحث بالكلمة أو الترجمة",label:"بحث بالكلمة أو الترجمة"},null,8,["modelValue"])]),f("div",Pe,[o(F,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=t=>y.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),f("div",Se,[o(F,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=t=>w.value=t),placeholder:"بحث باسم المجلد",label:"اسم المجلد"},null,8,["modelValue"])]),f("div",Ae,[o(L,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=t=>g.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),f("div",Ee,[o(L,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=t=>k.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),o(J),o(D,{"prepend-icon":"tabler-rotate-clockwise",onClick:ae,variant:"outlined"},{default:a(()=>e[18]||(e[18]=[s("إعادة تعيين")])),_:1,__:[18]}),o(D,{"prepend-icon":"tabler-plus",onClick:e[6]||(e[6]=t=>I.value=!0)},{default:a(()=>e[19]||(e[19]=[s("إضافة كلمة جديدة")])),_:1,__:[19]})]),_:1}),o($e),o(Ue,{"items-per-page":d.value,"onUpdate:itemsPerPage":e[8]||(e[8]=t=>d.value=t),"model-value":R.value,"onUpdate:modelValue":e[9]||(e[9]=t=>R.value=t),page:m.value,"onUpdate:page":e[10]||(e[10]=t=>m.value=t),items:le.value,"item-value":"id","items-length":A.value,headers:te,class:"text-no-wrap",loading:E.value,"onUpdate:options":K},{"item.word":a(({item:t})=>[s(u(t.word),1)]),"item.translation":a(({item:t})=>[s(u(t.translation),1)]),"item.example_sentence":a(({item:t})=>[s(u(t.example_sentence),1)]),"item.audio":a(({item:t})=>[t.audio_url?(i(),h(O,{key:0,onClick:B=>de(t),title:"تشغيل/إيقاف"},{default:a(()=>[o(_,{icon:C.value===t.id?"tabler-pause":"tabler-play"},null,8,["icon"])]),_:2},1032,["onClick"])):(i(),c("span",Ie,"-"))]),"item.folder_name":a(({item:t})=>[t.folder_id?(i(),c("a",{key:0,onClick:Q(B=>Z(M).push(`/admin/folders/${t.folder_id}`),["prevent"]),class:"text-primary cursor-pointer"},u(t.folder_name),9,Ne)):(i(),c("span",Fe,"-"))]),"item.user_name":a(({item:t})=>[t.user_id?(i(),c("a",{key:0,onClick:Q(B=>Z(M).push(`/admin/users/${t.user_id}`),["prevent"]),class:"text-primary cursor-pointer"},u(t.user_name),9,Oe)):(i(),c("span",he,"-"))]),"item.created_at":a(({item:t})=>[s(u(oe(t.created_at)),1)]),"item.actions":a(({item:t})=>[o(O,{onClick:B=>re(t)},{default:a(()=>[o(_,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),o(O,{onClick:B=>X(t.id)},{default:a(()=>[o(_,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:a(()=>[o(ue,{page:m.value,"onUpdate:page":e[7]||(e[7]=t=>m.value=t),"items-per-page":d.value,"total-items":A.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(ke,{"is-drawer-open":I.value,"onUpdate:isDrawerOpen":e[11]||(e[11]=t=>I.value=t),onWordData:se},null,8,["is-drawer-open"]),o(be,{"is-drawer-open":N.value,"onUpdate:isDrawerOpen":e[12]||(e[12]=t=>N.value=t),"word-data":G.value,onWordData:ne},null,8,["is-drawer-open","word-data"]),o(De,{modelValue:T.value,"onUpdate:modelValue":e[14]||(e[14]=t=>T.value=t),color:$.value,location:"top end",timeout:"5000"},{prepend:a(()=>[$.value==="success"?(i(),h(_,{key:0,icon:"tabler-check"})):$.value==="error"?(i(),h(_,{key:1,icon:"tabler-alert-circle"})):ge("",!0)]),actions:a(()=>[o(D,{icon:"",variant:"text",color:"white",onClick:e[13]||(e[13]=t=>T.value=!1)},{default:a(()=>[o(_,{icon:"tabler-x"})]),_:1})]),default:a(()=>[s(" "+u(Y.value)+" ",1)]),_:1},8,["modelValue","color"]),o(Te,{modelValue:b.value,"onUpdate:modelValue":e[16]||(e[16]=t=>b.value=t),"max-width":"500px"},{default:a(()=>[o(j,null,{default:a(()=>[o(q,{class:"text-h6"},{default:a(()=>e[20]||(e[20]=[s("تأكيد الحذف")])),_:1,__:[20]}),o(H,null,{default:a(()=>e[21]||(e[21]=[s("هل أنت متأكد أنك تريد حذف هذه الكلمة؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[21]}),o(Ce,{class:"px-6 pb-4"},{default:a(()=>[o(J),o(D,{color:"error",variant:"flat",onClick:e[15]||(e[15]=t=>b.value=!1)},{default:a(()=>e[22]||(e[22]=[s("إلغاء")])),_:1,__:[22]}),o(D,{color:"success",variant:"flat",onClick:ee},{default:a(()=>e[23]||(e[23]=[s("موافق")])),_:1,__:[23]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Ot as default};
