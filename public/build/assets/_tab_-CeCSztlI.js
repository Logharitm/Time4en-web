import{_ as J}from"./AppSelect-Bsoa-5U9.js";import{_ as R}from"./AppTextField-DPTQ7o5I.js";import{r as p,E as Z,c as C,o as i,b as e,e as l,s as x,t as E,a0 as w,Z as m,f as y,cD as q,d as S,$,F as U,a9 as H,h as j,u as K,V as Q,a5 as D,l as L}from"./main-Ck5OQVpa.js";import{$ as A}from"./api-DQg2EmU5.js";import{V as z}from"./VSnackbar-bmKtA7Bo.js";import{a as k,V as P}from"./VRow-DQJnEbgC.js";import{V as G}from"./VCard-CS2sUTs-.js";import{V as T}from"./VCardText-BxC6CEtL.js";import{V as X}from"./VAvatar-mdG6NKl9.js";import{V as N}from"./VForm-3anXCUnY.js";/* empty css                                                                   */import"./useApi-DB9iYgU6.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as h,V as ee}from"./VTabs-CqY4H8Q7.js";import{a as B,V as ae}from"./VWindowItem-LSwM7ZrH.js";import"./form-CUt863D8.js";import"./VSelect-BCy5ucG1.js";import"./VTextField-D8LFvFrU.js";/* empty css                   */import"./VCounter-DSbfeK1K.js";import"./VImg-CQ2loY3-.js";import"./VField-mvQv7O17.js";import"./easing-Bybner-F.js";import"./VInput-kBbJsbW6.js";import"./forwardRefs-C-GTDzx5.js";import"./VList-CzgJmlvl.js";import"./ssrBoot-Bb6TUV6w.js";import"./VDivider-DCKG-CWy.js";import"./dialog-transition-D1A83k2n.js";import"./VMenu-BhTSAsY1.js";import"./VOverlay-1w9HmcEE.js";import"./delay-CRyF_EI3.js";import"./lazy-CFIJ1jXu.js";import"./scopeId-BVbKgDAe.js";import"./VCheckboxBtn-B3JE3HhG.js";import"./VSelectionControl-XZPXIic8.js";import"./VChip-Bo_gEuo5.js";import"./VSlideGroup-i5VPCPGY.js";import"./index-CvOPxmL5.js";/* empty css              */const le={class:"d-flex flex-column justify-center gap-4"},te={class:"d-flex flex-wrap gap-4"},oe={__name:"AccountSettingsAccount",setup(F){const v=p(),n=p(!1),g=p(!1),f=p(!1),_=p(""),r=p("success"),t=p({name:"",email:"",language:"",role:"",avatar:null,avatarPreview:null}),u=["en","ar"],d=async()=>{var b;n.value=!0;try{const a=await A("/user",{method:"GET"}),o=(b=a==null?void 0:a.data)==null?void 0:b.user;o&&(t.value.name=o.name,t.value.email=o.email,t.value.language=o.language||"en",t.value.role=o.role,t.value.avatar=o.avatar)}catch(a){console.error("Error fetching user:",a)}finally{n.value=!1}},s=(b,a="success")=>{_.value=b,r.value=a,f.value=!0},V=async()=>{var b;g.value=!0;try{const a=new FormData;a.append("name",t.value.name),a.append("email",t.value.email),a.append("language",t.value.language),t.value.avatar instanceof File?a.append("avatar",t.value.avatar):a.append("avatar","");const o=await A("/update-profile",{method:"POST",body:a});s("تم تعديل البيانات بنجاح","success"),(b=o==null?void 0:o.data)!=null&&b.user&&(H("userData").value={name:o.data.user.name,role:o.data.user.role,email:o.data.user.email,avatar:o.data.user.avatar||null})}catch(a){console.error("Error updating profile:",a),s("حدث خطأ من فضلك حاو في وقت اخر","error")}finally{g.value=!1}},O=b=>{const{files:a}=b.target;a&&a.length&&(t.value.avatar=a[0],t.value.avatarPreview=URL.createObjectURL(a[0]))},M=()=>{t.value.avatar=null,t.value.avatarPreview=null,v.value.value=""};return Z(()=>{d()}),(b,a)=>{const o=R,W=J;return i(),C(U,null,[e(z,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=c=>f.value=c),color:r.value,location:"top end",timeout:"5000"},{prepend:l(()=>[r.value==="success"?(i(),y(m,{key:0,icon:"tabler-check"})):r.value==="error"?(i(),y(m,{key:1,icon:"tabler-alert-circle"})):(i(),y(m,{key:2,icon:"tabler-info-circle"}))]),actions:l(()=>[e(w,{icon:"",variant:"text",color:"white",onClick:a[0]||(a[0]=c=>f.value=!1)},{default:l(()=>[e(m,{icon:"tabler-x"})]),_:1})]),default:l(()=>[x(" "+E(_.value)+" ",1)]),_:1},8,["modelValue","color"]),e(P,null,{default:l(()=>[e(k,{cols:"12"},{default:l(()=>[e(G,null,{default:l(()=>[n.value?(i(),y(T,{key:0},{default:l(()=>[e(q,{indeterminate:"",color:"primary"})]),_:1})):(i(),y(T,{key:1,class:"d-flex"},{default:l(()=>[e(X,{rounded:"",size:"100",class:"me-6",image:t.value.avatarPreview||t.value.avatar||"/default-avatar.png"},null,8,["image"]),S("form",le,[S("div",te,[e(w,{color:"primary",size:"small",onClick:a[2]||(a[2]=c=>{var I;return(I=v.value)==null?void 0:I.click()})},{default:l(()=>[e(m,{icon:"tabler-cloud-upload",class:"d-sm-none"}),a[7]||(a[7]=S("span",{class:"d-none d-sm-block"},"تحميل صورة الحساب",-1))]),_:1,__:[7]}),S("input",{ref_key:"refInputEl",ref:v,type:"file",accept:".jpeg,.png,.jpg,.gif",hidden:"",onInput:O},null,544),e(w,{type:"reset",size:"small",color:"secondary",variant:"tonal",onClick:M},{default:l(()=>[a[8]||(a[8]=S("span",{class:"d-none d-sm-block"},"الغاء",-1)),e(m,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1,__:[8]})]),a[9]||(a[9]=S("p",{class:"text-body-1 mb-0"}," مسموح بالامتدادات JPG, GIF , PNG بمساحة 2 ميجا كحد اقصي ",-1))])]),_:1})),e(T,{class:"pt-2"},{default:l(()=>[e(N,{class:"mt-3",onSubmit:$(V,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(k,{cols:"12",md:"6"},{default:l(()=>[e(o,{modelValue:t.value.name,"onUpdate:modelValue":a[3]||(a[3]=c=>t.value.name=c),label:"الاسم",placeholder:"ادخل اسمك"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:l(()=>[e(o,{modelValue:t.value.email,"onUpdate:modelValue":a[4]||(a[4]=c=>t.value.email=c),label:"البريد الالكتروني",placeholder:"ادخل بريدك الالكتروني",type:"email"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:l(()=>[e(W,{modelValue:t.value.language,"onUpdate:modelValue":a[5]||(a[5]=c=>t.value.language=c),label:"اللغة",placeholder:"Select Language",items:u},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",md:"6"},{default:l(()=>[e(o,{modelValue:t.value.role,"onUpdate:modelValue":a[6]||(a[6]=c=>t.value.role=c),label:"الوظيفة",readonly:"",variant:"plain"},null,8,["modelValue"])]),_:1}),e(k,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(w,{type:"submit",loading:g.value},{default:l(()=>a[10]||(a[10]=[x(" حفظ التعديلات ")])),_:1,__:[10]},8,["loading"]),e(w,{color:"secondary",variant:"tonal",disabled:g.value,onClick:$(d,["prevent"])},{default:l(()=>a[11]||(a[11]=[x(" الغاء ")])),_:1,__:[11]},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},re={__name:"AccountSettingsSecurity",setup(F){const v=p([{key:"current_password",label:"كلمة المرور الحالية",value:"",visible:!1},{key:"new_password",label:"كلمة المرور الجديدة",value:"",visible:!1},{key:"new_password_confirmation",label:"تأكيد كلمة المرور الجديدة",value:"",visible:!1}]),n=p(!1),g=p(""),f=p("success"),_=(t,u="success")=>{g.value=t,f.value=u,n.value=!0},r=async()=>{var t,u;try{const d={};v.value.forEach(V=>{d[V.key]=V.value});const s=await A("/change-password",{method:"POST",body:d});_(s.data.message||"تم تعديل كلمة المرور بنجاح","success"),v.value.forEach(V=>V.value="")}catch(d){console.error("Error updating password:",d),_(((u=(t=d==null?void 0:d.response)==null?void 0:t._data)==null?void 0:u.message)||"حدث خطأ اثناء التعديل برجاء المحاولة في وقت لاحق","error")}};return(t,u)=>{const d=R;return i(),C(U,null,[e(z,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=s=>n.value=s),color:f.value,location:"top end",timeout:"5000"},{prepend:l(()=>[f.value==="success"?(i(),y(m,{key:0,icon:"tabler-check"})):f.value==="error"?(i(),y(m,{key:1,icon:"tabler-alert-circle"})):(i(),y(m,{key:2,icon:"tabler-info-circle"}))]),actions:l(()=>[e(w,{icon:"",variant:"text",color:"white",onClick:u[0]||(u[0]=s=>n.value=!1)},{default:l(()=>[e(m,{icon:"tabler-x"})]),_:1})]),default:l(()=>[x(" "+E(g.value)+" ",1)]),_:1},8,["modelValue","color"]),e(P,null,{default:l(()=>[e(k,{cols:"12"},{default:l(()=>[e(G,{title:"تعديل كلمة المرور"},{default:l(()=>[e(N,{onSubmit:$(r,["prevent"])},{default:l(()=>[e(T,{class:"pt-0"},{default:l(()=>[e(P,null,{default:l(()=>[(i(!0),C(U,null,j(v.value,s=>(i(),y(k,{key:s.key,cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:s.value,"onUpdate:modelValue":V=>s.value=V,type:s.visible?"text":"password","append-inner-icon":s.visible?"tabler-eye-off":"tabler-eye",label:s.label,autocomplete:"on",placeholder:"············","onClick:appendInner":V=>s.visible=!s.visible},null,8,["modelValue","onUpdate:modelValue","type","append-inner-icon","label","onClick:appendInner"])]),_:2},1024))),128))]),_:1})]),_:1}),e(T,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(w,{type:"submit"},{default:l(()=>u[2]||(u[2]=[x(" حفظ التعديلات ")])),_:1,__:[2]}),e(w,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>u[3]||(u[3]=[x(" الغاء ")])),_:1,__:[3]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},se=Y(re,[["__scopeId","data-v-329a5900"]]),qe={__name:"[tab]",setup(F){const v=K(),n=Q({get:()=>v.params.tab,set:()=>v.params.tab}),g=[{title:"البيانات العامة",icon:"tabler-users",tab:"account"},{title:"اعدادات الامان",icon:"tabler-lock",tab:"security"}];return(f,_)=>(i(),C("div",null,[e(ee,{modelValue:L(n),"onUpdate:modelValue":_[0]||(_[0]=r=>D(n)?n.value=r:null),class:"v-tabs-pill"},{default:l(()=>[(i(),C(U,null,j(g,r=>e(h,{key:r.icon,value:r.tab,to:{name:"pages-account-settings-tab",params:{tab:r.tab}}},{default:l(()=>[e(m,{size:"20",start:"",icon:r.icon},null,8,["icon"]),x(" "+E(r.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"]),e(ae,{modelValue:L(n),"onUpdate:modelValue":_[1]||(_[1]=r=>D(n)?n.value=r:null),class:"mt-6 disable-tab-transition",touch:!1},{default:l(()=>[e(B,{value:"account"},{default:l(()=>[e(oe)]),_:1}),e(B,{value:"security"},{default:l(()=>[e(se)]),_:1})]),_:1},8,["modelValue"])]))}};export{qe as default};
