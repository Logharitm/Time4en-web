import{_ as le}from"./TablePagination-Drl8JWrM.js";import{_ as re}from"./AppDateTimePicker-Dl4DxCJD.js";import{_ as se}from"./AppTextField-BtK_45Yd.js";import{_ as ie}from"./AppSelect-BWZy_TjB.js";import{r,E as ne,w as de,V as ue,c as me,b as o,e as a,i as pe,a as ce,o as B,s as i,d as m,a5 as k,Z as g,t as x,ak as ve,l as fe,f as Y,k as _e}from"./main-B5_k4GpE.js";import Ve from"./AddFolderDrawer-CEMhanfY.js";import ge from"./EditFolderDrawer-CQmcAm1g.js";import{$ as C}from"./api-BNAjheud.js";import{V as z,a as ye,b as G,d as we}from"./VCard-Bv4dJe5S.js";import{V as be}from"./VSnackbar-vKemk4na.js";import{V as ke}from"./VDialog-ADgZjCWH.js";import{V as L}from"./VCardText-CknN0uU7.js";import{V as Q}from"./VSpacer-BAghzqmj.js";import{V as xe}from"./VDivider-C-ZLWfpl.js";import{V as Ce}from"./VDataTableServer-BqOFJUMK.js";import"./VPagination-CVHAmuwN.js";import"./VField-CvWtN2O_.js";import"./form-DAIQPITd.js";import"./easing-Bybner-F.js";import"./VInput-E3bUw-v6.js";import"./VImg-Cb86Gui7.js";import"./VTextField-DWru8Zir.js";/* empty css                   */import"./VCounter-Kzc7POGj.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-CxHTeF2x.js";import"./VList-CU4JJ1N0.js";import"./ssrBoot-B6mxTEy1.js";import"./VAvatar-bWn95gFY.js";import"./dialog-transition-AgoygDbE.js";import"./VMenu-ClNa5w3K.js";import"./VOverlay-CGwfLGZo.js";import"./delay-Du-VFnPC.js";import"./lazy-0Ou_FOdk.js";import"./scopeId-CU0Zb9ir.js";import"./VCheckboxBtn-rtK4_g7K.js";import"./VSelectionControl-ka0NoHKN.js";import"./VChip-BNbIZiHe.js";import"./VSlideGroup-CS2knh2a.js";import"./validators-DpYrMFzk.js";import"./helpers-DK5QwNv0.js";import"./AppTextarea-BMfzV-wJ.js";import"./VTextarea-BXYKwEHR.js";import"./AppDrawerHeaderSection-mlFhqV8Q.js";import"./vue3-perfect-scrollbar-BPJZLzGT.js";import"./VNavigationDrawer-3BEvGEEC.js";import"./VForm-DtOjBCXK.js";import"./VRow-FDPefyAK.js";/* empty css              */import"./index-CvOPxmL5.js";import"./VDataTable-CdEZMhT8.js";import"./VTable-DYOWhEdG.js";import"./filter-BGgpA4Z3.js";const De={class:"me-3 d-flex gap-3"},Te={style:{"min-width":"200px"}},Ue={style:{"min-width":"200px"}},$e={style:{"min-width":"160px"}},Fe={style:{"min-width":"160px"}},Be=["onClick"],Pt={__name:"index",setup(Pe){const Z=pe(),p=r(""),c=r(""),v=r(""),f=r(""),n=r(10),d=r(1),D=r(),T=r(),P=r([]),h=l=>{var e,s;D.value=(e=l.sortBy[0])==null?void 0:e.key,T.value=(s=l.sortBy[0])==null?void 0:s.order},y=r(!1),S=r(""),w=r("success"),u=(l,e="success")=>{S.value=l,w.value=e,y.value=!0},_=r(!1),b=r(null),j=l=>{b.value=l,_.value=!0},q=async()=>{b.value&&(await oe(b.value),_.value=!1,b.value=null)},H=[{title:"اسم المجلد",key:"name"},{title:"عدد الكلمات",key:"words_count"},{title:"الوصف",key:"description"},{title:"تاريخ الإنشاء",key:"created_at"},{title:"المستخدم",key:"user_name"}],E=r([]),U=r(0),$=r(!0),J=l=>l?new Date(l).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"",V=async()=>{var l;$.value=!0;try{const e={search:p.value||void 0,user_name:c.value||void 0,created_from:v.value||void 0,created_to:f.value||void 0,per_page:n.value,page:d.value,sort_by:D.value,sort_order:T.value},s=await C("/folders",{method:"GET",params:e});s.status==="success"&&(E.value=s.data,U.value=((l=s.meta)==null?void 0:l.total)||0)}catch(e){console.error("Error fetching folders",e)}finally{$.value=!1}},K=()=>{p.value="",c.value="",v.value="",f.value=""};ne(()=>{V()}),de([p,c,v,f,n,d,D,T],V);const W=ue(()=>E.value),I=r(!1),F=r(!1),N=r(null),X=l=>{N.value=l,F.value=!0},ee=async l=>{try{await C("/folders",{method:"POST",body:l}),u("تم إضافة المجلد بنجاح","success"),V()}catch{u("حدث خطأ، حاول مرة أخرى","error")}},te=async(l,e)=>{try{await C(`/folders/${l}/update`,{method:"POST",body:e}),u("تم تعديل المجلد بنجاح","success"),V()}catch{u("حدث خطأ، حاول مرة أخرى","error")}},oe=async l=>{try{await C(`/folders/${l}/delete`,{method:"POST"}),u("تم حذف المجلد بنجاح","success"),V()}catch{u("حدث خطأ أثناء الحذف","error")}};return(l,e)=>{const s=ie,O=se,A=re,M=ce("IconBtn"),ae=le;return B(),me("section",null,[o(z,{class:"mb-6"},{default:a(()=>[o(ye,{class:"pb-4"},{default:a(()=>[o(G,null,{default:a(()=>e[15]||(e[15]=[i("المجلدات")])),_:1,__:[15]})]),_:1}),o(L,{class:"d-flex flex-wrap gap-4 align-center"},{default:a(()=>[m("div",De,[o(s,{label:"عرض","model-value":n.value,items:[10,25,50,100].map(t=>({value:t,title:t})),style:{"inline-size":"6.25rem"},"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=parseInt(t,10))},null,8,["model-value","items"])]),m("div",Te,[o(O,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),placeholder:"بحث باسم المجلد او الوصف",label:"اسم المجلد او الوصف"},null,8,["modelValue"])]),m("div",Ue,[o(O,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),placeholder:"بحث باسم المستخدم",label:"اسم المستخدم"},null,8,["modelValue"])]),m("div",$e,[o(A,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),label:"تاريخ الإنشاء من",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),m("div",Fe,[o(A,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),label:"تاريخ الإنشاء إلى",config:{enableTime:!1,dateFormat:"Y-m-d"}},null,8,["modelValue"])]),o(Q),o(k,{"prepend-icon":"tabler-rotate-clockwise",onClick:K,variant:"outlined"},{default:a(()=>e[16]||(e[16]=[i(" إعادة تعيين ")])),_:1,__:[16]})]),_:1}),o(xe),o(Ce,{"items-per-page":n.value,"onUpdate:itemsPerPage":e[6]||(e[6]=t=>n.value=t),"model-value":P.value,"onUpdate:modelValue":e[7]||(e[7]=t=>P.value=t),page:d.value,"onUpdate:page":e[8]||(e[8]=t=>d.value=t),items:W.value,"item-value":"id","items-length":U.value,headers:H,class:"text-no-wrap",loading:$.value,"onUpdate:options":h},{"item.user_name":a(({item:t})=>[m("a",{onClick:ve(R=>fe(Z).push(`/admin/users/${t.user.id}`),["prevent"]),class:"text-primary cursor-pointer"},x(t.user_name),9,Be)]),"item.created_at":a(({item:t})=>[i(x(J(t.created_at)),1)]),"item.words_count":a(({item:t})=>[i(x(t.words_count),1)]),"item.actions":a(({item:t})=>[o(M,{onClick:R=>X(t)},{default:a(()=>[o(g,{icon:"tabler-pencil"})]),_:2},1032,["onClick"]),o(M,{onClick:R=>j(t.id)},{default:a(()=>[o(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),bottom:a(()=>[o(ae,{page:d.value,"onUpdate:page":e[5]||(e[5]=t=>d.value=t),"items-per-page":n.value,"total-items":U.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","loading"])]),_:1}),o(Ve,{"is-drawer-open":I.value,"onUpdate:isDrawerOpen":e[9]||(e[9]=t=>I.value=t),onFolderData:ee},null,8,["is-drawer-open"]),o(ge,{"is-drawer-open":F.value,"onUpdate:isDrawerOpen":e[10]||(e[10]=t=>F.value=t),"folder-data":N.value,onFolderData:te},null,8,["is-drawer-open","folder-data"]),o(be,{modelValue:y.value,"onUpdate:modelValue":e[12]||(e[12]=t=>y.value=t),color:w.value,location:"top end",timeout:"5000"},{prepend:a(()=>[w.value==="success"?(B(),Y(g,{key:0,icon:"tabler-check"})):w.value==="error"?(B(),Y(g,{key:1,icon:"tabler-alert-circle"})):_e("",!0)]),actions:a(()=>[o(k,{icon:"",variant:"text",color:"white",onClick:e[11]||(e[11]=t=>y.value=!1)},{default:a(()=>[o(g,{icon:"tabler-x"})]),_:1})]),default:a(()=>[i(" "+x(S.value)+" ",1)]),_:1},8,["modelValue","color"]),o(ke,{modelValue:_.value,"onUpdate:modelValue":e[14]||(e[14]=t=>_.value=t),"max-width":"500px"},{default:a(()=>[o(z,null,{default:a(()=>[o(G,{class:"text-h6"},{default:a(()=>e[17]||(e[17]=[i("تأكيد الحذف")])),_:1,__:[17]}),o(L,null,{default:a(()=>e[18]||(e[18]=[i("هل أنت متأكد أنك تريد حذف هذا المجلد؟ لا يمكن التراجع عن هذا الإجراء.")])),_:1,__:[18]}),o(we,{class:"px-6 pb-4"},{default:a(()=>[o(Q),o(k,{color:"error",variant:"flat",onClick:e[13]||(e[13]=t=>_.value=!1)},{default:a(()=>e[19]||(e[19]=[i("إلغاء")])),_:1,__:[19]}),o(k,{color:"success",variant:"flat",onClick:q},{default:a(()=>e[20]||(e[20]=[i("موافق")])),_:1,__:[20]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Pt as default};
